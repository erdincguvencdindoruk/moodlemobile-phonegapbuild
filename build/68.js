webpackJsonp([68],{2080:function(n,l,e){"use strict";function t(n){return p._42(0,[(n()(),p._16(0,0,null,null,6,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.toggleDelete(e)&&t}return t},V.b,V.a)),p._15(1,1097728,[[2,4]],0,J.a,[[8,""],Y.a,p.p,p.K],{clear:[0,"clear"]},null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n                "])),(n()(),p._16(4,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(5,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"],ios:[1,"ios"]},null),(n()(),p._40(-1,0,["\n            "]))],function(n,l){n(l,1,0,"");n(l,5,0,"create","md-create")},function(n,l){n(l,0,0,p._41(l,0,0,p._29(l,2).transform("core.delete")));n(l,4,0,p._29(l,5)._hidden)})}function o(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"core-empty-box",[["icon","chatbubbles"]],null,null,null,Q.b,Q.a)),p._15(1,49152,null,0,Z.a,[],{message:[0,"message"],icon:[1,"icon"]},null),p._32(131072,q.a,[G.a,p.i])],function(n,l){n(l,1,0,p._41(l,1,0,p._29(l,2).transform("core.comments.nocomments")),"chatbubbles")},null)}function a(n){return p._42(0,[(n()(),p._16(0,0,null,null,8,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(3,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(4,null,["\n            ","\n        "])),p._32(131072,q.a,[G.a,p.i]),p._34(6,1),p._33(7,{$a:0}),p._32(131072,q.a,[G.a,p.i])],function(n,l){n(l,3,0,"warning")},function(n,l){n(l,2,0,p._29(l,3)._hidden);n(l,4,0,p._41(l,4,0,p._29(l,8).transform("core.thereisdatatosync",n(l,7,0,p._41(l,4,0,n(l,6,0,p._29(l.parent,0),p._41(l,4,0,p._29(l,5).transform("core.comments.comments"))))))))})}function u(n){return p._42(0,[(n()(),p._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=!1!==o.deleteComment(e,o.offlineComment)&&t}return t},V.b,V.a)),p._15(1,1097728,[[4,4]],0,J.a,[[8,""],Y.a,p.p,p.K],{color:[0,"color"],clear:[1,"clear"]},null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n                    "])),(n()(),p._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(5,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(-1,0,["\n                "]))],function(n,l){n(l,1,0,"danger","");n(l,5,0,"trash")},function(n,l){n(l,0,0,"fromRight",p._41(l,0,1,p._29(l,2).transform("core.delete")));n(l,4,0,p._29(l,5)._hidden)})}function i(n){return p._42(0,[(n()(),p._16(0,0,null,null,38,"ion-card",[],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.addComment(e)&&t}return t},null,null)),p._15(1,16384,null,0,nn.a,[Y.a,p.p,p.K],null,null),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(3,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ln.b,ln.a)),p._15(4,1097728,null,3,en.a,[tn.a,Y.a,p.p,p.K,[2,on.a]],null,null),p._37(335544320,3,{contentLabel:0}),p._37(603979776,4,{_buttons:1}),p._37(603979776,5,{_icons:1}),p._15(8,16384,null,0,an.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,un.b,un.a)),p._15(11,770048,null,0,rn.a,[sn.a,y.a,cn.a,mn.a,C.a,[2,fn.a]],{user:[0,"user"]},null),p._15(12,16384,null,0,_n.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),p._40(15,null,["",""])),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(17,0,null,2,5,"p",[],null,null,null,null,null)),(n()(),p._40(-1,null,["\n                    "])),(n()(),p._16(19,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(20,147456,[[5,4]],0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(21,null,[" ","\n                "])),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,2,["\n                "])),(n()(),p._11(16777216,null,4,1,null,u)),p._15(25,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n            "])),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(28,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ln.b,ln.a)),p._15(29,1097728,null,3,en.a,[tn.a,Y.a,p.p,p.K,[2,on.a]],null,null),p._37(335544320,6,{contentLabel:0}),p._37(603979776,7,{_buttons:1}),p._37(603979776,8,{_icons:1}),p._15(33,16384,null,0,an.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(35,0,null,2,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(36,540672,null,0,pn.a,[p.p,y.a,g.a,b.a,G.a,hn.a,cn.a,yn.a,gn.a,bn.a,mn.a,vn.a,[2,sn.a],[2,Cn.a],[2,fn.a],In.a,C.a],{text:[0,"text"],clean:[1,"clean"]},null),(n()(),p._40(-1,2,["\n            "])),(n()(),p._40(-1,null,["\n        "]))],function(n,l){var e=l.component;n(l,11,0,e.offlineComment);n(l,20,0,"time");n(l,25,0,e.showDelete);n(l,36,0,e.offlineComment.content,"true")},function(n,l){n(l,15,0,l.component.offlineComment.fullname);n(l,19,0,p._29(l,20)._hidden);n(l,21,0,p._41(l,21,0,p._29(l,22).transform("core.notsent")))})}function r(n){return p._42(0,[(n()(),p._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),p._40(1,null,["",""])),p._34(2,2)],null,function(n,l){n(l,1,0,p._41(l,1,0,n(l,2,0,p._29(l.parent.parent,1),1e3*l.parent.context.$implicit.timecreated,"strftimerecentfull")))})}function s(n){return p._42(0,[(n()(),p._16(0,0,null,null,8,"p",[],null,null,null,null,null)),(n()(),p._40(-1,null,["\n                    "])),(n()(),p._16(2,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(3,147456,[[11,4]],0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(-1,null,[" "])),(n()(),p._16(5,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),p._40(6,null,["",""])),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,null,["\n                "]))],function(n,l){n(l,3,0,"trash")},function(n,l){n(l,2,0,p._29(l,3)._hidden);n(l,6,0,p._41(l,6,0,p._29(l,7).transform("core.deletedoffline")))})}function c(n){return p._42(0,[(n()(),p._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.deleteComment(e,n.parent.context.$implicit)&&t}return t},V.b,V.a)),p._15(1,1097728,[[10,4]],0,J.a,[[8,""],Y.a,p.p,p.K],{color:[0,"color"],clear:[1,"clear"]},null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n                    "])),(n()(),p._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(5,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(-1,0,["\n                "]))],function(n,l){n(l,1,0,"danger","");n(l,5,0,"trash")},function(n,l){n(l,0,0,"fromRight",p._41(l,0,1,p._29(l,2).transform("core.delete")));n(l,4,0,p._29(l,5)._hidden)})}function m(n){return p._42(0,[(n()(),p._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.undoDeleteComment(e,n.parent.context.$implicit)&&t}return t},V.b,V.a)),p._15(1,1097728,[[10,4]],0,J.a,[[8,""],Y.a,p.p,p.K],{color:[0,"color"],clear:[1,"clear"]},null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n                    "])),(n()(),p._16(4,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(5,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(-1,0,["\n                "]))],function(n,l){n(l,1,0,"danger","");n(l,5,0,"undo")},function(n,l){n(l,0,0,p._41(l,0,0,p._29(l,2).transform("core.restore")));n(l,4,0,p._29(l,5)._hidden)})}function f(n){return p._42(0,[(n()(),p._16(0,0,null,null,40,"ion-card",[],null,null,null,null,null)),p._15(1,16384,null,0,nn.a,[Y.a,p.p,p.K],null,null),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(3,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ln.b,ln.a)),p._15(4,1097728,null,3,en.a,[tn.a,Y.a,p.p,p.K,[2,on.a]],null,null),p._37(335544320,9,{contentLabel:0}),p._37(603979776,10,{_buttons:1}),p._37(603979776,11,{_icons:1}),p._15(8,16384,null,0,an.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,un.b,un.a)),p._15(11,770048,null,0,rn.a,[sn.a,y.a,cn.a,mn.a,C.a,[2,fn.a]],{user:[0,"user"]},null),p._15(12,16384,null,0,_n.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),p._40(15,null,["",""])),(n()(),p._40(-1,2,["\n                "])),(n()(),p._11(16777216,null,2,1,null,r)),p._15(18,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._11(16777216,null,2,1,null,s)),p._15(21,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._11(16777216,null,4,1,null,c)),p._15(24,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._11(16777216,null,4,1,null,m)),p._15(27,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,2,["\n            "])),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(30,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,ln.b,ln.a)),p._15(31,1097728,null,3,en.a,[tn.a,Y.a,p.p,p.K,[2,on.a]],null,null),p._37(335544320,12,{contentLabel:0}),p._37(603979776,13,{_buttons:1}),p._37(603979776,14,{_icons:1}),p._15(35,16384,null,0,an.a,[],null,null),(n()(),p._40(-1,2,["\n                "])),(n()(),p._16(37,0,null,2,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),p._15(38,540672,null,0,pn.a,[p.p,y.a,g.a,b.a,G.a,hn.a,cn.a,yn.a,gn.a,bn.a,mn.a,vn.a,[2,sn.a],[2,Cn.a],[2,fn.a],In.a,C.a],{text:[0,"text"],clean:[1,"clean"]},null),(n()(),p._40(-1,2,["\n            "])),(n()(),p._40(-1,null,["\n        "]))],function(n,l){var e=l.component;n(l,11,0,l.context.$implicit);n(l,18,0,!l.context.$implicit.deleted);n(l,21,0,l.context.$implicit.deleted);n(l,24,0,e.showDelete&&!l.context.$implicit.deleted&&l.context.$implicit.delete);n(l,27,0,e.showDelete&&l.context.$implicit.deleted);n(l,38,0,l.context.$implicit.content,"true")},function(n,l){n(l,15,0,l.context.$implicit.fullname)})}function _(n){return p._42(0,[(n()(),p._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,xn.b,xn.a)),p._15(1,212992,null,0,Dn.a,[p.p,Cn.a],null,null),p._15(2,1228800,null,2,wn.a,[hn.a],null,null),p._37(335544320,15,{_mainButton:0}),p._37(603979776,16,{_fabLists:1}),(n()(),p._40(-1,0,["\n        "])),(n()(),p._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.addComment(e)&&t}return t},kn.b,kn.a)),p._15(7,49152,[[15,4]],0,Ln.a,[Y.a,p.p,p.K],null,null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n            "])),(n()(),p._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),p._15(11,147456,null,0,H.a,[Y.a,p.p,p.K],{name:[0,"name"]},null),(n()(),p._40(-1,0,["\n        "])),(n()(),p._40(-1,0,["\n    "]))],function(n,l){n(l,1,0);n(l,11,0,"add")},function(n,l){n(l,6,0,p._41(l,6,0,p._29(l,8).transform("core.comments.addcomment")));n(l,10,0,p._29(l,11)._hidden)})}function d(n){return p._42(0,[p._32(0,dn.h,[]),p._32(0,Kn.a,[gn.a,v.a]),p._37(402653184,1,{content:0}),(n()(),p._16(3,0,null,null,32,"ion-header",[],null,null,null,null,null)),p._15(4,16384,null,0,Un.a,[Y.a,p.p,p.K,[2,Pn.a]],null,null),(n()(),p._40(-1,null,["\n    "])),(n()(),p._16(6,0,null,null,28,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,On.b,On.a)),p._15(7,49152,null,0,Tn.a,[An.a,[2,Pn.a],[2,sn.a],Y.a,p.p,p.K],null,null),p._15(8,212992,null,0,Mn.a,[Tn.a,hn.a,G.a,C.a],null,null),(n()(),p._40(-1,3,["\n        "])),(n()(),p._16(10,0,null,3,3,"ion-title",[],null,null,null,Xn.b,Xn.a)),p._15(11,49152,null,0,Nn.a,[Y.a,p.p,p.K,[2,Wn.a],[2,Tn.a]],null,null),(n()(),p._16(12,0,null,0,1,"core-format-text",[],null,null,null,null,null)),p._15(13,540672,null,0,pn.a,[p.p,y.a,g.a,b.a,G.a,hn.a,cn.a,yn.a,gn.a,bn.a,mn.a,vn.a,[2,sn.a],[2,Cn.a],[2,fn.a],In.a,C.a],{text:[0,"text"]},null),(n()(),p._40(-1,3,["\n        "])),(n()(),p._16(15,0,null,2,18,"ion-buttons",[["end",""]],null,null,null,null,null)),p._15(16,16384,null,1,$n.a,[Y.a,p.p,p.K,[2,Wn.a],[2,Tn.a]],null,null),p._37(603979776,2,{_buttons:1}),(n()(),p._40(-1,null,["\n            "])),(n()(),p._11(16777216,null,null,1,null,t)),p._15(20,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,null,["\n            "])),(n()(),p._16(22,0,null,null,10,"core-context-menu",[],null,null,null,Sn.b,Sn.a)),p._15(23,245760,null,0,En.a,[G.a,Rn.a,p.p,g.a,[2,jn.a],cn.a],null,null),(n()(),p._40(-1,0,["\n                "])),(n()(),p._16(25,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.refreshComments(!1)&&t}return t},Fn.b,Fn.a)),p._15(26,770048,null,0,zn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n                "])),(n()(),p._16(29,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.refreshComments(!0)&&t}return t},Fn.b,Fn.a)),p._15(30,770048,null,0,zn.a,[En.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,0,["\n            "])),(n()(),p._40(-1,null,["\n        "])),(n()(),p._40(-1,3,["\n    "])),(n()(),p._40(-1,null,["\n"])),(n()(),p._40(-1,null,["\n"])),(n()(),p._16(37,0,null,null,32,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Bn.b,Bn.a)),p._15(38,4374528,[[1,4]],0,Cn.a,[Y.a,hn.a,Vn.a,p.p,p.K,An.a,Jn.a,p.D,[2,Pn.a],[2,sn.a]],null,null),(n()(),p._40(-1,1,["\n    "])),(n()(),p._16(40,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;if("ionRefresh"===l){t=!1!==n.component.refreshComments(!1,e)&&t}return t},null,null)),p._15(41,212992,null,0,Yn.a,[hn.a,Cn.a,p.D,qn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),p._40(-1,null,["\n        "])),(n()(),p._16(43,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Gn.b,Gn.a)),p._15(44,114688,null,0,Hn.a,[Yn.a,Y.a],{pullingText:[0,"pullingText"]},null),p._32(131072,q.a,[G.a,p.i]),(n()(),p._40(-1,null,["\n    "])),(n()(),p._40(-1,1,["\n    "])),(n()(),p._16(48,0,null,1,17,"core-loading",[],null,null,null,Qn.b,Qn.a)),p._15(49,638976,null,0,Zn.a,[G.a,p.p,C.a,cn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),p._40(-1,0,["\n        "])),(n()(),p._11(16777216,null,0,1,null,o)),p._15(52,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,0,["\n\n        "])),(n()(),p._11(16777216,null,0,1,null,a)),p._15(55,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,0,["\n\n        "])),(n()(),p._11(16777216,null,0,1,null,i)),p._15(58,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,0,["\n\n        "])),(n()(),p._11(16777216,null,0,1,null,f)),p._15(61,802816,null,0,dn.j,[p.W,p.T,p.v],{ngForOf:[0,"ngForOf"]},null),(n()(),p._40(-1,0,["\n\n        "])),(n()(),p._16(63,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.loadMore(e)&&t}return t},nl.b,nl.a)),p._15(64,573440,null,0,ll.a,[[2,Cn.a],g.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(n()(),p._40(-1,0,["\n    "])),(n()(),p._40(-1,1,["\n\n    "])),(n()(),p._11(16777216,null,0,1,null,_)),p._15(68,16384,null,0,dn.k,[p.W,p.T],{ngIf:[0,"ngIf"]},null),(n()(),p._40(-1,1,["\n"])),(n()(),p._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,8,0);n(l,13,0,e.title);n(l,20,0,e.canDeleteComments),n(l,23,0);n(l,26,0,p._41(l,26,0,p._29(l,27).transform("core.refresh")),e.refreshIcon,!0,100,!(e.commentsLoaded&&!e.hasOffline));n(l,30,0,p._41(l,30,0,p._29(l,31).transform("core.settings.synchronizenow")),e.syncIcon,!1,100,!(e.commentsLoaded&&e.hasOffline));n(l,41,0,e.commentsLoaded);n(l,44,0,p._19(1,"",p._41(l,44,0,p._29(l,45).transform("core.pulltorefresh")),""));n(l,49,0,e.commentsLoaded);n(l,52,0,!e.comments||!e.comments.length);n(l,55,0,e.hasOffline);n(l,58,0,e.offlineComment);n(l,61,0,e.comments);n(l,64,0,e.canLoadMore,e.loadMoreError);n(l,68,0,e.canAddComments)},function(n,l){n(l,6,0,p._29(l,7)._hidden,p._29(l,7)._sbPadding);n(l,37,0,p._29(l,38).statusbarPadding,p._29(l,38)._hasRefresher);n(l,40,0,"inactive"!==p._29(l,41).state,p._29(l,41)._top);n(l,43,0,p._29(l,44).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var p=e(1),h=(e(0),e(7),e(4)),y=(e(731),e(2)),g=e(5),b=e(11),v=e(25),C=e(12),I=e(44),x=e(161),D=e(384),w=e(521),k=function(){function n(n,l,e,t,o,a,u,i,r,s,c,m){var f=this;this.sitesProvider=l,this.userProvider=e,this.domUtils=t,this.translate=o,this.modalCtrl=a,this.commentsProvider=u,this.offlineComments=i,this.commentsSync=s,this.textUtils=c,this.timeUtils=m,this.comments=[],this.commentsLoaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.canAddComments=!1,this.canDeleteComments=!1,this.showDelete=!1,this.hasOffline=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.addDeleteCommentsAvailable=!1,this.contextLevel=n.get("contextLevel"),this.instanceId=n.get("instanceId"),this.componentName=n.get("componentName"),this.itemId=n.get("itemId"),this.area=n.get("area")||"",this.title=n.get("title")||this.translate.instant("core.comments.comments"),this.page=0,this.syncObserver=r.on(w.a.AUTO_SYNCED,function(n){n.contextLevel==f.contextLevel&&n.instanceId==f.instanceId&&n.componentName==f.componentName&&n.itemId==f.itemId&&n.area==f.area&&(f.showSyncWarnings(n.warnings),f.commentsLoaded=!1,f.refreshIcon="spinner",f.syncIcon="spinner",f.domUtils.scrollToTop(f.content),f.page=0,f.comments=[],f.fetchComments(!1))},l.getCurrentSiteId())}return n.prototype.ionViewDidLoad=function(){var n=this;this.commentsProvider.isAddCommentsAvailable().then(function(l){n.addDeleteCommentsAvailable=l}),this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.fetchComments(!0)},n.prototype.fetchComments=function(n,l){var e=this;this.loadMoreError=!1;return(n?this.syncComments(l):Promise.resolve()).catch(function(){}).then(function(){return e.offlineComments.getComment(e.contextLevel,e.instanceId,e.componentName,e.itemId,e.area).then(function(n){return e.offlineComment=n,n&&!e.currentUser?e.userProvider.getProfile(e.currentUserId,void 0,!0).then(function(n){e.currentUser=n,e.offlineComment.profileimageurl=n.profileimageurl,e.offlineComment.fullname=n.fullname,e.offlineComment.userid=n.id}).catch(function(){}):(n&&(e.offlineComment.profileimageurl=e.currentUser.profileimageurl,e.offlineComment.fullname=e.currentUser.fullname,e.offlineComment.userid=e.currentUser.id),e.offlineComments.getDeletedComments(e.contextLevel,e.instanceId,e.componentName,e.itemId,e.area))})}).then(function(n){return e.hasOffline=!!e.offlineComment||n.length>0,e.commentsProvider.getComments(e.contextLevel,e.instanceId,e.componentName,e.itemId,e.area,e.page).then(function(n){e.canAddComments=e.addDeleteCommentsAvailable&&n.canpost;var l=n.comments.sort(function(n,l){return l.timecreated-n.timecreated});return e.canLoadMore=l.length>0&&l.length>=x.a.pageSize,Promise.all(l.map(function(n){return e.userProvider.getProfile(n.userid,void 0,!0).then(function(l){return n.profileimageurl=l.profileimageurl,n}).catch(function(){return n})}))}).then(function(l){e.comments=e.comments.concat(l),n&&n.forEach(function(n){var l=e.comments.find(function(l){return l.id==n.commentid});l&&(l.deleted=n.deleted)}),e.canDeleteComments=e.addDeleteCommentsAvailable&&(e.hasOffline||e.comments.some(function(n){return!!n.delete}))})}).catch(function(n){e.loadMoreError=!0,n&&"assignsubmission_comments"==e.componentName?e.domUtils.showAlertTranslated("core.notice","core.comments.commentsnotworking"):e.domUtils.showErrorModalDefault(n,e.translate.instant("core.error")+": get_comments")}).finally(function(){e.commentsLoaded=!0,e.refreshIcon="refresh",e.syncIcon="sync"})},n.prototype.loadMore=function(n){return this.page++,this.canLoadMore=!1,this.fetchComments(!0).finally(function(){n&&n()})},n.prototype.refreshComments=function(n,l){var e=this;return this.refreshIcon="spinner",this.syncIcon="spinner",this.commentsProvider.invalidateCommentsData(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area).finally(function(){return e.page=0,e.comments=[],e.fetchComments(!0,n).finally(function(){l&&l.complete()})})},n.prototype.showSyncWarnings=function(n){var l=this.textUtils.buildMessage(n);l&&this.domUtils.showErrorModal(l)},n.prototype.syncComments=function(n){var l=this;return this.commentsSync.syncComments(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area).then(function(n){l.showSyncWarnings(n)}).catch(function(e){return n&&l.domUtils.showErrorModalDefault(e,"core.errorsync",!0),Promise.reject(null)})},n.prototype.addComment=function(n){var l=this;n.preventDefault(),n.stopPropagation();var e=this.modalCtrl.create("CoreCommentsAddPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,componentName:this.componentName,itemId:this.itemId,area:this.area,content:this.hasOffline?this.offlineComment.content:""});e.onDidDismiss(function(n){n&&n.comments?(l.comments=n.comments.concat(l.comments),l.canDeleteComments=l.addDeleteCommentsAvailable):n&&!n.comments&&l.fetchComments(!1)}),e.present()},n.prototype.deleteComment=function(n,l){var e=this;n.preventDefault(),n.stopPropagation();var t=this.timeUtils.userDate(1e3*(l.lastmodified||l.timecreated),"core.strftimerecentfull");l.contextlevel=this.contextLevel,l.instanceid=this.instanceId,l.component=this.componentName,l.itemid=this.itemId,l.area=this.area,this.domUtils.showConfirm(this.translate.instant("core.comments.deletecommentbyon",{$a:{user:l.fullname||"",time:t}})).then(function(){e.commentsProvider.deleteComment(l).then(function(){e.showDelete=!1,e.refreshComments(!0),e.domUtils.showToast("core.comments.eventcommentdeleted",!0,3e3)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Delete comment failed.")})}).catch(function(){})},n.prototype.undoDeleteComment=function(n,l){var e=this;n.preventDefault(),n.stopPropagation(),this.offlineComments.undoDeleteComment(l.id).then(function(){l.deleted=!1,e.showDelete=!1})},n.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},n.prototype.ngOnDestroy=function(){this.syncObserver&&this.syncObserver.off()},n}(),L=e(30),K=e(32),U=e(110),P=e(370),O=function(){return function(){}}(),T=e(1471),A=e(1472),M=e(1473),X=e(1474),N=e(1475),W=e(1476),$=e(1477),S=e(1478),E=e(1479),R=e(1480),j=e(1481),F=e(1482),z=e(1483),B=e(480),V=e(45),J=e(43),Y=e(8),q=e(28),G=e(19),H=e(47),Q=e(122),Z=e(111),nn=e(84),ln=e(31),en=e(22),tn=e(21),on=e(29),an=e(33),un=e(211),rn=e(180),sn=e(20),cn=e(3),mn=e(10),fn=e(26),_n=e(153),dn=e(9),pn=e(42),hn=e(17),yn=e(24),gn=e(6),bn=e(18),vn=e(14),Cn=e(27),In=e(38),xn=e(277),Dn=e(252),wn=e(217),kn=e(278),Ln=e(187),Kn=e(246),Un=e(365),Pn=e(39),On=e(713),Tn=e(209),An=e(35),Mn=e(471),Xn=e(714),Nn=e(309),Wn=e(245),$n=e(366),Sn=e(86),En=e(75),Rn=e(66),jn=e(73),Fn=e(87),zn=e(79),Bn=e(179),Vn=e(34),Jn=e(102),Yn=e(152),qn=e(40),Gn=e(210),Hn=e(168),Qn=e(51),Zn=e(48),nl=e(369),ll=e(271),el=e(72),tl=e(169),ol=p._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreSlideInOut",definitions:[{type:1,expr:"void => fromLeft",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromLeft => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"void => fromRight",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromRight => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:1},offset:null}]},timings:300}],options:null}],options:{}}]}}),al=p._12("page-core-comments-viewer",k,function(n){return p._42(0,[(n()(),p._16(0,0,null,null,1,"page-core-comments-viewer",[],null,null,null,d,ol)),p._15(1,180224,null,0,k,[el.a,y.a,I.a,g.a,G.a,tl.a,x.a,D.a,C.a,w.a,b.a,v.a],null,null)],null,null)},{},{},[]),ul=e(23),il=e(361),rl=e(362),sl=e(364),cl=e(363),ml=e(470),fl=e(712),_l=e(269);e.d(l,"CoreCommentsViewerPageModuleNgFactory",function(){return dl});var dl=p._13(O,[],function(n){return p._25([p._26(512,p.n,p._6,[[8,[T.a,A.a,M.a,X.a,N.a,W.a,$.a,S.a,E.a,R.a,j.a,F.a,z.a,B.a,al]],[3,p.n],p.B]),p._26(4608,dn.m,dn.l,[p.x,[2,dn.w]]),p._26(4608,ul.x,ul.x,[]),p._26(4608,ul.d,ul.d,[]),p._26(4608,il.b,il.a,[]),p._26(4608,rl.a,rl.b,[]),p._26(4608,sl.b,sl.a,[]),p._26(4608,cl.b,cl.a,[]),p._26(4608,G.a,G.a,[ml.a,il.b,rl.a,sl.b,cl.b,G.b,G.c]),p._26(512,dn.b,dn.b,[]),p._26(512,ul.v,ul.v,[]),p._26(512,ul.i,ul.i,[]),p._26(512,ul.s,ul.s,[]),p._26(512,fl.a,fl.a,[]),p._26(512,h.a,h.a,[]),p._26(512,K.a,K.a,[]),p._26(512,U.a,U.a,[]),p._26(512,L.a,L.a,[]),p._26(512,P.a,P.a,[]),p._26(512,fl.b,fl.b,[]),p._26(512,O,O,[]),p._26(256,G.c,void 0,[]),p._26(256,G.b,void 0,[]),p._26(256,_l.a,k,[])])})}});