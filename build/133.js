webpackJsonp([133],{2062:function(n,l,e){"use strict";function t(n){return W._42(0,[(n()(),W._16(0,0,null,null,3,"core-empty-box",[["icon","calendar"]],null,null,null,Mn.b,Mn.a)),W._15(1,49152,null,0,$n.a,[],{message:[0,"message"],icon:[1,"icon"]},null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n    "]))],function(n,l){n(l,1,0,W._41(l,1,0,W._29(l,2).transform("addon.calendar.noevents")),"calendar")},null)}function i(n){return W._42(0,[(n()(),W._16(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,W._19(1,"",l.parent.context.$implicit.moduleIcon,""))})}function a(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,An.b,An.a)),W._15(1,704512,null,0,Fn.a,[W.p,Cn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit.icon)},null)}function u(n){return W._42(0,[(n()(),W._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),W._15(1,16384,null,0,Wn.a,[Cn.a,W.p,W.K],null,null),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(4,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),W._40(7,null,["",""])),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,null,["\n                "]))],function(n,l){n(l,4,0,"time")},function(n,l){n(l,3,0,W._29(l,4)._hidden);n(l,7,0,W._41(l,7,0,W._29(l,8).transform("core.notsent")))})}function o(n){return W._42(0,[(n()(),W._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),W._15(1,16384,null,0,Wn.a,[Cn.a,W.p,W.K],null,null),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._16(3,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(4,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),W._40(7,null,["",""])),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,null,["\n                "]))],function(n,l){n(l,4,0,"trash")},function(n,l){n(l,3,0,W._29(l,4)._hidden);n(l,7,0,W._41(l,7,0,W._29(l,8).transform("core.deletedoffline")))})}function r(n){return W._42(0,[(n()(),W._16(0,0,null,null,31,null,null,null,null,null,null,null)),(n()(),W._40(-1,null,["\n            "])),(n()(),W._16(2,0,null,null,28,"a",[["class","addon-calendar-event item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.eventClicked(n.context.$implicit)&&t}return t},Un.b,Un.a)),W._15(3,278528,null,0,R.i,[W.v,W.w,W.p,W.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),W._31(4,1),W._15(5,1097728,null,3,Sn.a,[Kn.a,Cn.a,W.p,W.K,[2,Hn.a]],null,null),W._37(335544320,1,{contentLabel:0}),W._37(603979776,2,{_buttons:1}),W._37(603979776,3,{_icons:1}),W._15(9,16384,null,0,Rn.a,[],null,null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._11(16777216,null,0,1,null,i)),W._15(12,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._11(16777216,null,0,1,null,a)),W._15(15,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._16(17,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),W._16(18,0,null,null,1,"core-format-text",[],null,null,null,null,null)),W._15(19,540672,null,0,Ln.a,[W.p,Y.a,j.a,Vn.a,xn.a,Yn.a,G.a,jn.a,Bn.a,Gn.a,X.a,zn.a,[2,Jn.a],[2,qn.a],[2,Qn.a],Xn.a,L.a],{text:[0,"text"]},null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._16(21,0,null,2,2,"p",[],null,null,null,null,null)),(n()(),W._16(22,0,null,null,1,"core-format-text",[],null,null,null,null,null)),W._15(23,540672,null,0,Ln.a,[W.p,Y.a,j.a,Vn.a,xn.a,Yn.a,G.a,jn.a,Bn.a,Gn.a,X.a,zn.a,[2,Jn.a],[2,qn.a],[2,Qn.a],Xn.a,L.a],{text:[0,"text"]},null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._11(16777216,null,4,1,null,u)),W._15(26,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,2,["\n                "])),(n()(),W._11(16777216,null,4,1,null,o)),W._15(29,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,2,["\n            "])),(n()(),W._40(-1,null,["\n        "]))],function(n,l){n(l,3,0,"addon-calendar-event",n(l,4,0,"addon-calendar-eventtype-"+l.context.$implicit.eventtype));n(l,12,0,l.context.$implicit.moduleIcon);n(l,15,0,l.context.$implicit.icon&&!l.context.$implicit.moduleIcon);n(l,19,0,l.context.$implicit.name);n(l,23,0,l.context.$implicit.formattedtime);n(l,26,0,l.context.$implicit.offline&&!l.context.$implicit.deleted);n(l,29,0,l.context.$implicit.deleted)},function(n,l){n(l,2,0,l.context.$implicit.name,l.context.$implicit.id==l.component.eventId)})}function s(n){return W._42(0,[(n()(),W._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),W._15(1,16384,null,0,Zn.a,[Cn.a,W.p,W.K,Yn.a,nl.l,ll.a],null,null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._11(16777216,null,null,1,null,r)),W._15(4,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,["\n    "]))],function(n,l){n(l,4,0,l.component.filteredEvents)},null)}function c(n){return W._42(0,[(n()(),W._16(0,0,null,null,8,"core-loading",[["class","core-loading-center"]],null,null,null,el.b,el.a)),W._15(1,638976,null,0,tl.a,[xn.a,W.p,L.a,G.a],{hideUntil:[0,"hideUntil"]},null),(n()(),W._40(-1,0,["\n    "])),(n()(),W._11(16777216,null,0,1,null,t)),W._15(4,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n\n    "])),(n()(),W._11(16777216,null,0,1,null,s)),W._15(7,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n\n"])),(n()(),W._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,1,0,e.loaded);n(l,4,0,!e.filteredEvents||!e.filteredEvents.length);n(l,7,0,e.filteredEvents&&e.filteredEvents.length)},null)}function d(n){return W._42(0,[(n()(),W._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.goToCurrentMonth()&&t}return t},wn.b,wn.a)),W._15(1,770048,null,0,Tn.a,[Nn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),W._32(131072,Dn.a,[xn.a,W.i])],function(n,l){n(l,1,0,W._41(l,1,0,W._29(l,2).transform("addon.calendar.currentmonth")),"fa-calendar-times-o",900)},null)}function f(n){return W._42(0,[(n()(),W._16(0,0,null,null,10,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),W._15(1,16384,null,0,wl.a,[],null,null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadPrevious()&&t}return t},kn.b,kn.a)),W._15(4,1097728,null,0,On.a,[[8,""],Cn.a,W.p,W.K],{clear:[0,"clear"]},null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n                    "])),(n()(),W._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(8,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-back","ios-arrow-back")},function(n,l){n(l,3,0,W._41(l,3,0,W._29(l,5).transform("core.previous")));n(l,7,0,W._29(l,8)._hidden)})}function h(n){return W._42(0,[(n()(),W._16(0,0,null,null,10,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),W._15(1,16384,null,0,wl.a,[],null,null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadNext()&&t}return t},kn.b,kn.a)),W._15(4,1097728,null,0,On.a,[[8,""],Cn.a,W.p,W.K],{clear:[0,"clear"]},null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n                    "])),(n()(),W._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(8,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-forward","ios-arrow-forward")},function(n,l){n(l,3,0,W._41(l,3,0,W._29(l,5).transform("core.next")));n(l,7,0,W._29(l,8)._hidden)})}function _(n){return W._42(0,[(n()(),W._16(0,0,null,null,11,"ion-col",[["class","addon-calendar-weekday col"],["text-center",""]],null,null,null,null,null)),W._15(1,16384,null,0,wl.a,[],null,null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(3,0,null,null,3,"span",[["class","hidden-tablet"]],[[8,"title",0]],null,null,null,null)),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(5,null,["",""])),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(8,0,null,null,2,"span",[["class","hidden-phone"]],null,null,null,null,null)),(n()(),W._40(9,null,["",""])),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,null,["\n            "]))],null,function(n,l){n(l,3,0,W._41(l,3,0,W._29(l,4).transform(l.context.$implicit.fullname)));n(l,5,0,W._41(l,5,0,W._29(l,6).transform(l.context.$implicit.shortname)));n(l,9,0,W._41(l,9,0,W._29(l,10).transform(l.context.$implicit.fullname)))})}function v(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-col",[["class","dayblank addon-calendar-day col"]],null,null,null,null,null)),W._15(1,16384,null,0,wl.a,[],null,null)],null,null)}function p(n){return W._42(0,[(n()(),W._16(0,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null))],null,function(n,l){n(l,0,0,W._19(1,"calendar_event_type calendar_event_",l.context.$implicit,""))})}function m(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(1,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"time")},function(n,l){n(l,0,0,W._29(l,1)._hidden)})}function g(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(1,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"trash")},function(n,l){n(l,0,0,W._29(l,1)._hidden)})}function E(n){return W._42(0,[(n()(),W._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,W._19(1,"",l.parent.parent.context.$implicit.moduleIcon,""))})}function y(n){return W._42(0,[(n()(),W._16(0,0,null,null,19,"p",[["class","addon-calendar-event"]],[[2,"addon-calendar-event-past",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.eventClicked(n.parent.context.$implicit,e)&&t}return t},null,null)),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._16(2,0,null,null,0,"span",[],[[8,"className",0]],null,null,null,null)),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._11(16777216,null,null,1,null,m)),W._15(5,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._11(16777216,null,null,1,null,g)),W._15(8,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._16(10,0,null,null,2,"span",[["class","addon-calendar-event-time"]],null,null,null,null,null)),(n()(),W._40(11,null,["",""])),W._34(12,2),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._11(16777216,null,null,1,null,E)),W._15(15,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n                            "])),(n()(),W._16(17,0,null,null,1,"span",[["class","addon-calendar-event-name"]],null,null,null,null,null)),(n()(),W._40(18,null,["",""])),(n()(),W._40(-1,null,["\n                        "]))],function(n,l){n(l,5,0,l.parent.context.$implicit.offline&&!l.parent.context.$implicit.deleted);n(l,8,0,l.parent.context.$implicit.deleted);n(l,15,0,l.parent.context.$implicit.moduleIcon)},function(n,l){var e=l.component;n(l,0,0,l.parent.context.$implicit.ispast);n(l,2,0,W._19(1,"calendar_event_type calendar_event_",l.parent.context.$implicit.formattedType,""));n(l,11,0,W._41(l,11,0,n(l,12,0,W._29(l.parent.parent.parent.parent,0),1e3*l.parent.context.$implicit.timestart,e.timeFormat)));n(l,18,0,l.parent.context.$implicit.name)})}function I(n){return W._42(0,[(n()(),W._16(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),W._40(-1,null,["\n                        "])),(n()(),W._11(16777216,null,null,1,null,y)),W._15(3,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n                    "]))],function(n,l){n(l,3,0,l.context.index<3||4==l.parent.context.$implicit.filteredEvents.length)},null)}function b(n){return W._42(0,[(n()(),W._16(0,0,null,null,4,"p",[["class","addon-calendar-day-more"]],null,null,null,null,null)),(n()(),W._16(1,0,null,null,3,"b",[],null,null,null,null,null)),(n()(),W._40(2,null,["",""])),W._33(3,{$a:0}),W._32(131072,Dn.a,[xn.a,W.i])],null,function(n,l){n(l,2,0,W._41(l,2,0,W._29(l,4).transform("core.nummore",n(l,3,0,l.parent.context.$implicit.filteredEvents.length-3))))})}function C(n){return W._42(0,[(n()(),W._16(0,0,null,null,24,"ion-col",[["class","addon-calendar-day col"],["text-center",""]],[[2,"addon-calendar-event-past-day",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.dayClicked(n.context.$implicit.mday)&&t}return t},null,null)),W._15(1,278528,null,0,R.i,[W.v,W.w,W.p,W.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),W._33(2,{hasevents:0,today:1,weekend:2,duration_finish:3}),W._15(3,16384,null,0,wl.a,[],null,null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(5,0,null,null,2,"p",[["class","addon-calendar-day-number"]],null,null,null,null,null)),(n()(),W._16(6,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),W._40(7,null,["",""])),(n()(),W._40(-1,null,["\n\n                "])),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(10,0,null,null,2,"p",[["class","hidden-tablet addon-calendar-dot-types"]],null,null,null,null,null)),(n()(),W._11(16777216,null,null,1,null,p)),W._15(12,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,["\n\n                "])),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(15,0,null,null,8,"div",[["class","hidden-phone addon-calendar-day-events"]],null,null,null,null,null)),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._11(16777216,null,null,2,null,I)),W._15(18,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),W._32(0,R.u,[]),(n()(),W._40(-1,null,["\n                    "])),(n()(),W._11(16777216,null,null,1,null,b)),W._15(22,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._40(-1,null,["\n            "]))],function(n,l){n(l,1,0,"addon-calendar-day",n(l,2,0,l.context.$implicit.hasevents,l.component.isCurrentMonth&&l.context.$implicit.istoday,l.context.$implicit.isweekend,l.context.$implicit.haslastdayofevent));n(l,12,0,l.context.$implicit.calendareventtypes);n(l,18,0,W._41(l,18,0,W._29(l,19).transform(l.context.$implicit.filteredEvents,0,4)));n(l,22,0,l.context.$implicit.filteredEvents.length>4)},function(n,l){n(l,0,0,l.component.isPastMonth||l.context.$implicit.ispast);n(l,7,0,l.context.$implicit.mday)})}function k(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-col",[["class","dayblank addon-calendar-day col"]],null,null,null,null,null)),W._15(1,16384,null,0,wl.a,[],null,null)],null,null)}function O(n){return W._42(0,[(n()(),W._16(0,0,null,null,13,"ion-row",[["class","addon-calendar-week row"]],null,null,null,null,null)),W._15(1,16384,null,0,Tl.a,[],null,null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,v)),W._15(4,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,[" "])),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,C)),W._15(8,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,k)),W._15(11,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,[" "])),(n()(),W._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.context.$implicit.prepadding);n(l,8,0,l.context.$implicit.days);n(l,11,0,l.context.$implicit.postpadding)},null)}function D(n){return W._42(0,[W._32(0,Nl.a,[Bn.a,B.a]),(n()(),W._40(-1,null,["\n"])),(n()(),W._40(-1,null,["\n"])),(n()(),W._16(3,0,null,null,10,"core-navbar-buttons",[["end",""],["prepend",""]],null,null,null,Pl.b,Pl.a)),W._15(4,245760,null,1,Ml.a,[W.p,Bn.a,j.a],null,null),W._37(603979776,1,{buttons:1}),(n()(),W._40(-1,0,["\n    "])),(n()(),W._16(7,0,null,0,5,"core-context-menu",[],null,null,null,yl.b,yl.a)),W._15(8,245760,null,0,Nn.a,[xn.a,Il.a,W.p,j.a,[2,bl.a],G.a],null,null),(n()(),W._40(-1,0,["\n        "])),(n()(),W._11(16777216,null,0,1,null,d)),W._15(11,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n    "])),(n()(),W._40(-1,0,["\n"])),(n()(),W._40(-1,null,["\n\n"])),(n()(),W._16(15,0,null,null,41,"core-loading",[["class","core-loading-center"]],null,null,null,el.b,el.a)),W._15(16,638976,null,0,tl.a,[xn.a,W.p,L.a,G.a],{hideUntil:[0,"hideUntil"]},null),(n()(),W._40(-1,0,["\n    "])),(n()(),W._40(-1,0,["\n    "])),(n()(),W._16(19,0,null,0,19,"ion-grid",[["class","addon-calendar-navigation grid"],["no-padding",""]],null,null,null,null,null)),W._15(20,16384,null,0,$l.a,[],null,null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._16(22,0,null,null,15,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),W._15(23,16384,null,0,Tl.a,[],null,null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,f)),W._15(26,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._16(28,0,null,null,5,"ion-col",[["class","addon-calendar-period col"],["text-center",""]],null,null,null,null,null)),W._15(29,16384,null,0,wl.a,[],null,null),(n()(),W._40(-1,null,["\n                "])),(n()(),W._16(31,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),W._40(32,null,["",""])),(n()(),W._40(-1,null,["\n            "])),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,h)),W._15(36,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._40(-1,null,["\n    "])),(n()(),W._40(-1,0,["\n\n    "])),(n()(),W._40(-1,0,["\n    "])),(n()(),W._16(41,0,null,0,14,"ion-grid",[["class","addon-calendar-months grid"]],null,null,null,null,null)),W._15(42,16384,null,0,$l.a,[],null,null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._40(-1,null,["\n        "])),(n()(),W._16(45,0,null,null,5,"ion-row",[["class","row"]],null,null,null,null,null)),W._15(46,16384,null,0,Tl.a,[],null,null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,_)),W._15(49,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._40(-1,null,["\n\n        "])),(n()(),W._40(-1,null,["\n        "])),(n()(),W._11(16777216,null,null,1,null,O)),W._15(54,802816,null,0,R.j,[W.W,W.T,W.v],{ngForOf:[0,"ngForOf"]},null),(n()(),W._40(-1,null,["\n    "])),(n()(),W._40(-1,0,["\n\n"])),(n()(),W._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,4,0),n(l,8,0);n(l,11,0,e.canNavigate&&!e.isCurrentMonth&&e.displayNavButtons);n(l,16,0,e.loaded);n(l,26,0,e.canNavigate);n(l,36,0,e.canNavigate);n(l,49,0,e.weekDays);n(l,54,0,e.weeks)},function(n,l){n(l,32,0,l.component.periodName)})}function x(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(1,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"funnel")},function(n,l){n(l,0,0,W._29(l,1)._hidden)})}function w(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"ion-icon",[["name","ios-funnel-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(1,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-funnel-outline")},function(n,l){n(l,0,0,W._29(l,1)._hidden)})}function T(n){return W._42(0,[(n()(),W._16(0,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openCourseFilter(e)&&t}return t},kn.b,kn.a)),W._15(1,1097728,[[3,4]],0,On.a,[[8,""],Cn.a,W.p,W.K],null,null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n                "])),(n()(),W._11(16777216,null,0,1,null,x)),W._15(5,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._11(16777216,null,0,1,null,w)),W._15(8,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n            "]))],function(n,l){var e=l.component;n(l,5,0,e.courseId);n(l,8,0,!e.courseId)},function(n,l){n(l,0,0,W._41(l,0,0,W._29(l,2).transform("core.courses.filter")))})}function N(n){return W._42(0,[(n()(),W._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.toggleDisplay()&&t}return t},wn.b,wn.a)),W._15(1,770048,null,0,Tn.a,[Nn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),W._32(131072,Dn.a,[xn.a,W.i])],function(n,l){n(l,1,0,W._41(l,1,0,W._29(l,2).transform("addon.calendar.upcomingevents")),"list",800)},null)}function P(n){return W._42(0,[(n()(),W._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.toggleDisplay()&&t}return t},wn.b,wn.a)),W._15(1,770048,null,0,Tn.a,[Nn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),W._32(131072,Dn.a,[xn.a,W.i])],function(n,l){n(l,1,0,W._41(l,1,0,W._29(l,2).transform("addon.calendar.monthlyview")),"fa-calendar-o",800)},null)}function M(n){return W._42(0,[(n()(),W._16(0,0,null,null,8,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),W._15(1,16384,null,0,Pn.a,[Cn.a,W.p,W.K],null,null),(n()(),W._40(-1,null,["\n        "])),(n()(),W._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(4,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null),(n()(),W._40(5,null,[" ","\n    "])),W._32(131072,Dn.a,[xn.a,W.i]),W._33(7,{$a:0}),W._32(131072,Dn.a,[xn.a,W.i])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,W._29(l,4)._hidden);n(l,5,0,W._41(l,5,0,W._29(l,8).transform("core.hasdatatosync",n(l,7,0,W._41(l,5,0,W._29(l,6).transform("addon.calendar.calendar"))))))})}function $(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"addon-calendar-upcoming-events",[],[[8,"hidden",0]],[[null,"onEventClicked"]],function(n,l,e){var t=!0;if("onEventClicked"===l){t=!1!==n.component.gotoEvent(e)&&t}return t},c,il)),W._15(1,770048,[[2,4]],0,ln,[L.a,Y.a,V.a,z.a,J.a,q.a,j.a,Q.a],{courseId:[0,"courseId"],categoryId:[1,"categoryId"]},{onEventClicked:"onEventClicked"})],function(n,l){var e=l.component;n(l,1,0,e.courseId,e.categoryId)},function(n,l){n(l,0,0,l.component.showCalendar)})}function A(n){return W._42(0,[(n()(),W._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,al.b,al.a)),W._15(1,212992,null,0,ul.a,[W.p,qn.a],null,null),W._15(2,1228800,null,2,ol.a,[Yn.a],null,null),W._37(335544320,4,{_mainButton:0}),W._37(603979776,5,{_fabLists:1}),(n()(),W._40(-1,0,["\n        "])),(n()(),W._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openEdit()&&t}return t},rl.b,rl.a)),W._15(7,49152,[[4,4]],0,sl.a,[Cn.a,W.p,W.K],null,null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n            "])),(n()(),W._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),W._15(11,147456,null,0,bn.a,[Cn.a,W.p,W.K],{name:[0,"name"]},null),(n()(),W._40(-1,0,["\n        "])),(n()(),W._40(-1,0,["\n    "]))],function(n,l){n(l,1,0);n(l,11,0,"add")},function(n,l){n(l,6,0,W._41(l,6,0,W._29(l,8).transform("addon.calendar.newevent")));n(l,10,0,W._29(l,11)._hidden)})}function F(n){return W._42(0,[W._37(402653184,1,{calendarComponent:0}),W._37(671088640,2,{upcomingEventsComponent:0}),(n()(),W._16(2,0,null,null,38,"ion-header",[],null,null,null,null,null)),W._15(3,16384,null,0,cl.a,[Cn.a,W.p,W.K,[2,dl.a]],null,null),(n()(),W._40(-1,null,["\n    "])),(n()(),W._16(5,0,null,null,34,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,fl.b,fl.a)),W._15(6,49152,null,0,hl.a,[_l.a,[2,dl.a],[2,Jn.a],Cn.a,W.p,W.K],null,null),W._15(7,212992,null,0,vl.a,[hl.a,Yn.a,xn.a,L.a],null,null),(n()(),W._40(-1,3,["\n        "])),(n()(),W._16(9,0,null,3,3,"ion-title",[],null,null,null,pl.b,pl.a)),W._15(10,49152,null,0,ml.a,[Cn.a,W.p,W.K,[2,gl.a],[2,hl.a]],null,null),(n()(),W._40(11,0,["",""])),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,3,["\n        "])),(n()(),W._16(14,0,null,2,24,"ion-buttons",[["end",""]],null,null,null,null,null)),W._15(15,16384,null,1,El.a,[Cn.a,W.p,W.K,[2,gl.a],[2,hl.a]],null,null),W._37(603979776,3,{_buttons:1}),(n()(),W._40(-1,null,["\n            "])),(n()(),W._11(16777216,null,null,1,null,T)),W._15(19,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,null,["\n            "])),(n()(),W._16(21,0,null,null,16,"core-context-menu",[],null,null,null,yl.b,yl.a)),W._15(22,245760,null,0,Nn.a,[xn.a,Il.a,W.p,j.a,[2,bl.a],G.a],null,null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._11(16777216,null,0,1,null,N)),W._15(25,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._11(16777216,null,0,1,null,P)),W._15(28,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,0,["\n                "])),(n()(),W._16(30,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.openSettings()&&t}return t},wn.b,wn.a)),W._15(31,770048,null,0,Tn.a,[Nn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n                "])),(n()(),W._16(34,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,e,!0)&&t}return t},wn.b,wn.a)),W._15(35,770048,null,0,Tn.a,[Nn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,0,["\n            "])),(n()(),W._40(-1,null,["\n        "])),(n()(),W._40(-1,3,["\n    "])),(n()(),W._40(-1,null,["\n"])),(n()(),W._40(-1,null,["\n"])),(n()(),W._16(42,0,null,null,24,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Cl.b,Cl.a)),W._15(43,4374528,null,0,qn.a,[Cn.a,Yn.a,ll.a,W.p,W.K,_l.a,kl.a,W.D,[2,dl.a],[2,Jn.a]],null,null),(n()(),W._40(-1,1,["\n    "])),(n()(),W._16(45,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(e)&&t}return t},null,null)),W._15(46,212992,null,0,Ol.a,[Yn.a,qn.a,W.D,nl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),W._40(-1,null,["\n        "])),(n()(),W._16(48,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Dl.b,Dl.a)),W._15(49,114688,null,0,xl.a,[Ol.a,Cn.a],{pullingText:[0,"pullingText"]},null),W._32(131072,Dn.a,[xn.a,W.i]),(n()(),W._40(-1,null,["\n    "])),(n()(),W._40(-1,1,["\n\n    "])),(n()(),W._40(-1,1,["\n    "])),(n()(),W._11(16777216,null,1,1,null,M)),W._15(55,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,1,["\n\n    "])),(n()(),W._16(57,0,null,1,1,"addon-calendar-calendar",[],[[8,"hidden",0]],[[null,"onEventClicked"],[null,"onDayClicked"]],function(n,l,e){var t=!0,i=n.component;if("onEventClicked"===l){t=!1!==i.gotoEvent(e)&&t}if("onDayClicked"===l){t=!1!==i.gotoDay(e)&&t}return t},D,Al)),W._15(58,770048,[[1,4]],0,Z,[L.a,Y.a,V.a,z.a,J.a,q.a,j.a,B.a,G.a,Q.a,X.a],{initialYear:[0,"initialYear"],initialMonth:[1,"initialMonth"],courseId:[2,"courseId"],categoryId:[3,"categoryId"],displayNavButtons:[4,"displayNavButtons"]},{onEventClicked:"onEventClicked",onDayClicked:"onDayClicked"}),(n()(),W._40(-1,1,["\n\n    "])),(n()(),W._11(16777216,null,1,1,null,$)),W._15(61,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,1,["\n\n    "])),(n()(),W._40(-1,1,["\n    "])),(n()(),W._11(16777216,null,0,1,null,A)),W._15(65,16384,null,0,R.k,[W.W,W.T],{ngIf:[0,"ngIf"]},null),(n()(),W._40(-1,1,["\n"])),(n()(),W._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,7,0);n(l,19,0,e.courses&&e.courses.length),n(l,22,0);n(l,25,0,e.showCalendar);n(l,28,0,!e.showCalendar);n(l,31,0,W._41(l,31,0,W._29(l,32).transform("core.settings.settings")),"cog",600,!e.notificationsEnabled);n(l,35,0,W._41(l,35,0,W._29(l,36).transform("core.settings.synchronizenow")),e.syncIcon,!1,400,!e.loaded||!e.hasOffline||!e.isOnline);n(l,46,0,e.loaded);n(l,49,0,W._19(1,"",W._41(l,49,0,W._29(l,50).transform("core.pulltorefresh")),""));n(l,55,0,e.hasOffline);n(l,58,0,e.year,e.month,e.courseId,e.categoryId,e.showCalendar);n(l,61,0,e.loadUpcoming);n(l,65,0,e.canCreate)},function(n,l){var e=l.component;n(l,5,0,W._29(l,6)._hidden,W._29(l,6)._sbPadding);n(l,11,0,W._41(l,11,0,W._29(l,12).transform(e.showCalendar?"addon.calendar.calendarevents":"addon.calendar.upcomingevents")));n(l,42,0,W._29(l,43).statusbarPadding,W._29(l,43)._hasRefresher);n(l,45,0,"inactive"!==W._29(l,46).state,W._29(l,46)._top);n(l,48,0,W._29(l,49).r.state);n(l,57,0,!e.showCalendar)})}Object.defineProperty(l,"__esModule",{value:!0});var W=e(1),U=(e(0),e(7),e(4)),S=e(30),K=e(32),H=e(110),R=e(9),L=e(12),V=e(155),Y=e(2),j=e(5),B=e(25),G=e(3),z=e(214),J=e(473),q=e(367),Q=e(52),X=e(10),Z=function(){function n(n,l,e,t,i,a,u,o,r,s,c){var d=this;this.calendarProvider=t,this.calendarHelper=i,this.calendarOffline=a,this.domUtils=u,this.timeUtils=o,this.utils=r,this.coursesProvider=s,this.appProvider=c,this.onEventClicked=new W.r,this.onDayClicked=new W.r,this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.currentSiteId=l.getCurrentSiteId(),e.isAvailable()&&(this.obsDefaultTimeChange=n.on(z.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){d.weeks.forEach(function(n){n.days.forEach(function(n){t.scheduleEventsNotifications(n.events)})})},this.currentSiteId)),this.undeleteEventObserver=n.on(z.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){d.undeleteEvent(n.eventId);var l=d.deletedEvents.indexOf(n.eventId);-1!=l&&d.deletedEvents.splice(l,1)}},this.currentSiteId)}return n.prototype.ngOnInit=function(){var n=new Date;this.year=this.initialYear?Number(this.initialYear):n.getFullYear(),this.month=this.initialMonth?Number(this.initialMonth):n.getMonth()+1,this.calculateIsCurrentMonth(),this.fetchData()},n.prototype.ngOnChanges=function(n){this.canNavigate=void 0===this.canNavigate||this.utils.isTrueOrOne(this.canNavigate),this.displayNavButtons=void 0===this.displayNavButtons||this.utils.isTrueOrOne(this.displayNavButtons),(n.courseId||n.categoryId)&&this.weeks&&this.filterEvents()},n.prototype.fetchData=function(n){var l=this;void 0===n&&(n=!1);var e=[];return e.push(this.loadCategories()),e.push(this.calendarOffline.getAllEditedEvents().then(function(n){n.forEach(function(n){n.offline=!0,l.calendarHelper.formatEventData(n)}),l.offlineEvents=l.calendarHelper.classifyIntoMonths(n);var e=n.filter(function(n){return n.id>0});l.offlineEditedEventsIds=e.map(function(n){return n.id})})),e.push(this.calendarOffline.getAllDeletedEventsIds().then(function(n){l.deletedEvents=n})),e.push(this.calendarProvider.getCalendarTimeFormat().then(function(n){l.timeFormat=n})),Promise.all(e).then(function(){return l.fetchEvents()}).catch(function(n){l.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){l.loaded=!0})},n.prototype.fetchEvents=function(){var n=this;return this.calendarProvider.getMonthlyEvents(this.year,this.month).catch(function(l){return n.appProvider.isOnline()?Promise.reject(l):n.calendarHelper.getOfflineMonthWeeks(n.year,n.month)}).then(function(l){if(n.periodName=n.timeUtils.userDate(new Date(n.year,n.month-1).getTime(),"core.strftimemonthyear"),n.weekDays=n.calendarProvider.getWeekDays(l.daynames[0].dayno),n.weeks=l.weeks,n.calculateIsCurrentMonth(),n.isCurrentMonth){var e=(new Date).getDate(),t=!0;n.weeks.forEach(function(l){l.days.some(function(l){return l.istoday=l.mday==e,l.ispast=t&&!l.istoday,t=l.ispast,l.istoday?(l.events.forEach(function(l){l.ispast=n.isEventPast(l)}),!0):l.istoday})})}n.mergeEvents(),n.filterEvents()})},n.prototype.loadCategories=function(){var n=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(l){n.categoriesRetrieved=!0,n.categories={},l.forEach(function(l){n.categories[l.id]=l})}).catch(function(){})},n.prototype.filterEvents=function(){var n=this,l=this.courseId?Number(this.courseId):void 0,e=this.categoryId?Number(this.categoryId):void 0;this.weeks.forEach(function(t){t.days.forEach(function(t){t.filteredEvents=!l||l<0?t.events:t.events.filter(function(t){return n.calendarHelper.shouldDisplayEvent(t,l,e,n.categories)}),n.calendarHelper.calculateDayData(t,t.filteredEvents)})})},n.prototype.refreshData=function(n){var l=this,e=[];return n||e.push(this.calendarProvider.invalidateMonthlyEvents(this.year,this.month)),e.push(this.coursesProvider.invalidateCategories(0,!0)),e.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(e).then(function(){return l.fetchData(!0)})},n.prototype.loadNext=function(){var n=this;this.increaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.decreaseMonth()}).finally(function(){n.loaded=!0})},n.prototype.loadPrevious=function(){var n=this;this.decreaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.increaseMonth()}).finally(function(){n.loaded=!0})},n.prototype.eventClicked=function(n,l){this.onEventClicked.emit(n.id),l.stopPropagation()},n.prototype.dayClicked=function(n){this.onDayClicked.emit({day:n,month:this.month,year:this.year})},n.prototype.calculateIsCurrentMonth=function(){var n=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentMonth=this.year==n.getFullYear()&&this.month==n.getMonth()+1,this.isPastMonth=this.year<n.getFullYear()||this.year==n.getFullYear()&&this.month<n.getMonth()+1},n.prototype.goToCurrentMonth=function(){var n=this,l=new Date,e=this.month,t=this.year;this.month=l.getMonth()+1,this.year=l.getFullYear(),this.loaded=!1,this.fetchEvents().then(function(){n.isCurrentMonth=!0}).catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.year=t,n.month=e}).finally(function(){n.loaded=!0})},n.prototype.decreaseMonth=function(){1===this.month?(this.month=12,this.year--):this.month--},n.prototype.increaseMonth=function(){12===this.month?(this.month=1,this.year++):this.month++},n.prototype.mergeEvents=function(){var n=this,l=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)];this.weeks.forEach(function(e){e.days.forEach(function(e){e.events.forEach(n.calendarHelper.formatEventData.bind(n.calendarHelper)),n.calendarProvider.scheduleEventsNotifications(e.events),(l||n.deletedEvents.length)&&(n.deletedEvents.length&&e.events.forEach(function(l){l.deleted=-1!=n.deletedEvents.indexOf(l.id)}),n.offlineEditedEventsIds.length&&(e.events=e.events.filter(function(l){return-1==n.offlineEditedEventsIds.indexOf(l.id)})),l&&l[e.mday]&&(e.events=n.sortEvents(e.events.concat(l[e.mday]))))})})},n.prototype.sortEvents=function(n){return n.sort(function(n,l){return n.timestart==l.timestart?n.timeduration-l.timeduration:n.timestart-l.timestart})},n.prototype.undeleteEvent=function(n){this.weeks&&this.weeks.forEach(function(l){l.days.forEach(function(l){var e=l.events.find(function(l){return l.id==n});e&&(e.deleted=!1)})})},n.prototype.isEventPast=function(n){return n.timestart+n.timeduration<this.currentTime},n.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},n}(),nn=e(41),ln=function(){function n(n,l,e,t,i,a,u,o){var r=this;this.calendarProvider=t,this.calendarHelper=i,this.calendarOffline=a,this.domUtils=u,this.coursesProvider=o,this.onEventClicked=new W.r,this.filteredEvents=[],this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents=[],this.deletedEvents=[],this.currentSiteId=l.getCurrentSiteId(),e.isAvailable()&&(this.obsDefaultTimeChange=n.on(z.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){t.scheduleEventsNotifications(r.onlineEvents)},this.currentSiteId)),this.undeleteEventObserver=n.on(z.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){r.undeleteEvent(n.eventId);var l=r.deletedEvents.indexOf(n.eventId);-1!=l&&r.deletedEvents.splice(l,1)}},this.currentSiteId)}return n.prototype.ngOnInit=function(){this.fetchData()},n.prototype.ngOnChanges=function(n){(n.courseId||n.categoryId)&&this.filterEvents()},n.prototype.fetchData=function(n){var l=this;void 0===n&&(n=!1);var e=[];return e.push(this.loadCategories()),e.push(this.calendarOffline.getAllEditedEvents().then(function(n){n.forEach(function(n){n.offline=!0,l.calendarHelper.formatEventData(n)}),l.offlineEvents=l.sortEvents(n)})),e.push(this.calendarOffline.getAllDeletedEventsIds().then(function(n){l.deletedEvents=n})),e.push(this.calendarProvider.getCalendarLookAhead().then(function(n){l.lookAhead=n})),e.push(this.calendarProvider.getCalendarTimeFormat().then(function(n){l.timeFormat=n})),Promise.all(e).then(function(){return l.fetchEvents()}).catch(function(n){l.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){l.loaded=!0})},n.prototype.fetchEvents=function(){var n=this;return this.calendarProvider.getUpcomingEvents().then(function(l){var e=[];return n.onlineEvents=l.events,n.onlineEvents.forEach(n.calendarHelper.formatEventData.bind(n.calendarHelper)),n.calendarProvider.scheduleEventsNotifications(n.onlineEvents),n.events=n.mergeEvents(),n.filterEvents(),n.events.forEach(function(l){e.push(n.calendarProvider.formatEventTime(l,n.timeFormat).then(function(n){l.formattedtime=n}))}),Promise.all(e)})},n.prototype.loadCategories=function(){var n=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(l){n.categoriesRetrieved=!0,n.categories={},l.forEach(function(l){n.categories[l.id]=l})}).catch(function(){})},n.prototype.filterEvents=function(){var n=this,l=this.courseId?Number(this.courseId):void 0,e=this.categoryId?Number(this.categoryId):void 0;this.filteredEvents=!l||l<0?this.events:this.events.filter(function(t){return n.calendarHelper.shouldDisplayEvent(t,l,e,n.categories)})},n.prototype.refreshData=function(n){var l=this,e=[];return n||e.push(this.calendarProvider.invalidateAllUpcomingEvents()),e.push(this.coursesProvider.invalidateCategories(0,!0)),e.push(this.calendarProvider.invalidateLookAhead()),e.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(e).then(function(){return l.fetchData(!0)})},n.prototype.eventClicked=function(n){this.onEventClicked.emit(n.id)},n.prototype.mergeEvents=function(){var n=this;if(!this.offlineEvents.length&&!this.deletedEvents.length)return this.onlineEvents;var l=Date.now()/1e3,e=l+nn.a.SECONDS_DAY*this.lookAhead,t=this.onlineEvents;this.deletedEvents.length&&t.forEach(function(l){l.deleted=-1!=n.deletedEvents.indexOf(l.id)}),this.offlineEvents.length&&(t=t.filter(function(l){return!n.offlineEvents.find(function(n){return n.id==l.id})}));var i=this.offlineEvents.filter(function(n){return(n.timestart>=l||n.timestart+n.timeduration>=l)&&n.timestart<=e});return t=t.concat(i),this.sortEvents(t)},n.prototype.sortEvents=function(n){return n.sort(function(n,l){return n.timestart==l.timestart?n.timeduration-l.timeduration:n.timestart-l.timestart})},n.prototype.undeleteEvent=function(n){var l=this.onlineEvents.find(function(l){return l.id==n});l&&(l.deleted=!1)},n.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},n}(),en=function(){return function(){}}(),tn=e(476),an=e(184),un=e(213),on=function(){function n(n,l,e,t,i,a,u,o,r,s,c,d,f,h){var _=this;this.navCtrl=a,this.domUtils=u,this.calendarProvider=o,this.calendarOffline=r,this.calendarHelper=s,this.calendarSync=c,this.eventsProvider=d,this.coursesHelper=f,this.appProvider=h,this.canCreate=!1,this.notificationsEnabled=!1,this.loaded=!1,this.hasOffline=!1,this.isOnline=!1,this.showCalendar=!0,this.loadUpcoming=!1,this.courseId=l.get("courseId"),this.eventId=l.get("eventId")||!1,this.year=l.get("year"),this.month=l.get("month"),this.notificationsEnabled=n.isAvailable(),this.currentSiteId=i.getCurrentSiteId(),this.loadUpcoming=!!l.get("upcoming"),this.showCalendar=!this.loadUpcoming,this.newEventObserver=d.on(z.a.NEW_EVENT_EVENT,function(n){n&&n.event&&(_.loaded=!1,_.refreshData(!0,!1,!0))},this.currentSiteId),this.discardedObserver=d.on(z.a.NEW_EVENT_DISCARDED_EVENT,function(){_.loaded=!1,_.refreshData(!0,!1,!0)},this.currentSiteId),this.editEventObserver=d.on(z.a.EDIT_EVENT_EVENT,function(n){n&&n.event&&(_.loaded=!1,_.refreshData(!0,!1,!0))},this.currentSiteId),this.syncObserver=d.on(tn.a.AUTO_SYNCED,function(n){_.loaded=!1,_.refreshData(!1,!1,!0)},this.currentSiteId),this.manualSyncObserver=d.on(tn.a.MANUAL_SYNCED,function(n){n&&"index"!=n.source&&(_.loaded=!1,_.refreshData(!1,!1,!0))},this.currentSiteId),this.deleteEventObserver=d.on(z.a.DELETED_EVENT_EVENT,function(n){_.loaded=!1,_.refreshData(!1,!1,!0)},this.currentSiteId),this.undeleteEventObserver=d.on(z.a.UNDELETED_EVENT_EVENT,function(n){_.calendarOffline.hasOfflineData().then(function(n){_.hasOffline=n})},this.currentSiteId),this.onlineObserver=e.onchange().subscribe(function(){t.run(function(){_.isOnline=_.appProvider.isOnline()})})}return n.prototype.ngOnInit=function(){this.eventId&&this.gotoEvent(this.eventId),this.fetchData(!0,!1)},n.prototype.fetchData=function(n,l){var e=this;this.syncIcon="spinner",this.isOnline=this.appProvider.isOnline();return(n?this.calendarSync.syncEvents().then(function(n){n.warnings&&n.warnings.length&&e.domUtils.showErrorModal(n.warnings[0]),n.updated&&(n.source="index",e.eventsProvider.trigger(tn.a.MANUAL_SYNCED,n,e.currentSiteId))}).catch(function(n){l&&e.domUtils.showErrorModalDefault(n,"core.errorsync",!0)}):Promise.resolve()).then(function(){var n=[];return e.hasOffline=!1,n.push(e.coursesHelper.getCoursesForPopover(e.courseId).then(function(n){e.courses=n.courses,e.categoryId=n.categoryId})),n.push(e.calendarHelper.canEditEvents(e.courseId).then(function(n){e.canCreate=n})),n.push(e.calendarOffline.hasOfflineData().then(function(n){e.hasOffline=n})),Promise.all(n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){e.loaded=!0,e.syncIcon="sync"})},n.prototype.doRefresh=function(n,l,e){return this.loaded?this.refreshData(!0,e).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshData=function(n,l,e){var t=this;this.syncIcon="spinner";var i=[];return i.push(this.calendarProvider.invalidateAllowedEventTypes()),this.showCalendar&&this.calendarComponent?i.push(this.calendarComponent.refreshData(e)):!this.showCalendar&&this.upcomingEventsComponent&&i.push(this.upcomingEventsComponent.refreshData(e)),Promise.all(i).finally(function(){return t.fetchData(n,l)})},n.prototype.gotoEvent=function(n){n<0?this.openEdit(n):this.navCtrl.push("AddonCalendarEventPage",{id:n})},n.prototype.gotoDay=function(n){var l={day:n.day,month:n.month,year:n.year};this.courseId&&(l.courseId=this.courseId),this.navCtrl.push("AddonCalendarDayPage",l)},n.prototype.openCourseFilter=function(n){var l=this;this.coursesHelper.selectCourse(n,this.courses,this.courseId).then(function(n){void 0!==n.courseId&&(l.courseId=n.courseId>0?n.courseId:void 0,l.categoryId=n.courseId>0?n.categoryId:void 0,l.calendarHelper.canEditEvents(l.courseId).then(function(n){l.canCreate=n}))})},n.prototype.openEdit=function(n){var l={};n&&(l.eventId=n),this.courseId&&(l.courseId=this.courseId),this.navCtrl.push("AddonCalendarEditEventPage",l)},n.prototype.openSettings=function(){this.navCtrl.push("AddonCalendarSettingsPage")},n.prototype.toggleDisplay=function(){this.showCalendar=!this.showCalendar,this.showCalendar||(this.loadUpcoming=!0)},n.prototype.ngOnDestroy=function(){this.newEventObserver&&this.newEventObserver.off(),this.discardedObserver&&this.discardedObserver.off(),this.editEventObserver&&this.editEventObserver.off(),this.deleteEventObserver&&this.deleteEventObserver.off(),this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.syncObserver&&this.syncObserver.off(),this.manualSyncObserver&&this.manualSyncObserver.off(),this.onlineObserver&&this.onlineObserver.unsubscribe()},n}(),rn=function(){return function(){}}(),sn=e(1471),cn=e(1472),dn=e(1473),fn=e(1474),hn=e(1475),_n=e(1476),vn=e(1477),pn=e(1478),mn=e(1479),gn=e(1480),En=e(1481),yn=e(1482),In=e(1483),bn=e(47),Cn=e(8),kn=e(45),On=e(43),Dn=e(28),xn=e(19),wn=e(87),Tn=e(79),Nn=e(75),Pn=e(84),Mn=e(122),$n=e(111),An=e(112),Fn=e(95),Wn=e(223),Un=e(31),Sn=e(22),Kn=e(21),Hn=e(29),Rn=e(33),Ln=e(42),Vn=e(11),Yn=e(17),jn=e(24),Bn=e(6),Gn=e(18),zn=e(14),Jn=e(20),qn=e(27),Qn=e(26),Xn=e(38),Zn=e(83),nl=e(40),ll=e(34),el=e(51),tl=e(48),il=W._14({encapsulation:2,styles:[],data:{}}),al=e(314),ul=e(275),ol=e(227),rl=e(315),sl=e(199),cl=e(365),dl=e(39),fl=e(713),hl=e(209),_l=e(35),vl=e(471),pl=e(714),ml=e(307),gl=e(245),El=e(366),yl=e(86),Il=e(66),bl=e(73),Cl=e(179),kl=e(102),Ol=e(152),Dl=e(210),xl=e(168),wl=e(119),Tl=e(118),Nl=e(246),Pl=e(96),Ml=e(88),$l=e(157),Al=W._14({encapsulation:2,styles:[],data:{}}),Fl=e(72),Wl=W._14({encapsulation:2,styles:[],data:{}}),Ul=W._12("page-addon-calendar-index",on,function(n){return W._42(0,[(n()(),W._16(0,0,null,null,1,"page-addon-calendar-index",[],null,null,null,F,Wl)),W._15(1,245760,null,0,on,[V.a,Fl.a,un.a,W.D,Y.a,Jn.a,j.a,z.a,q.a,J.a,tn.a,L.a,an.a,X.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Sl=e(23),Kl=e(361),Hl=e(362),Rl=e(364),Ll=e(363),Vl=e(470),Yl=e(712),jl=e(268);e.d(l,"AddonCalendarIndexPageModuleNgFactory",function(){return Bl});var Bl=W._13(rn,[],function(n){return W._25([W._26(512,W.n,W._6,[[8,[sn.a,cn.a,dn.a,fn.a,hn.a,_n.a,vn.a,pn.a,mn.a,gn.a,En.a,yn.a,In.a,Ul]],[3,W.n],W.B]),W._26(4608,R.m,R.l,[W.x,[2,R.w]]),W._26(4608,Sl.x,Sl.x,[]),W._26(4608,Sl.d,Sl.d,[]),W._26(4608,Kl.b,Kl.a,[]),W._26(4608,Hl.a,Hl.b,[]),W._26(4608,Rl.b,Rl.a,[]),W._26(4608,Ll.b,Ll.a,[]),W._26(4608,xn.a,xn.a,[Vl.a,Kl.b,Hl.a,Rl.b,Ll.b,xn.b,xn.c]),W._26(512,R.b,R.b,[]),W._26(512,Sl.v,Sl.v,[]),W._26(512,Sl.i,Sl.i,[]),W._26(512,Sl.s,Sl.s,[]),W._26(512,Yl.a,Yl.a,[]),W._26(512,U.a,U.a,[]),W._26(512,K.a,K.a,[]),W._26(512,H.a,H.a,[]),W._26(512,S.a,S.a,[]),W._26(512,en,en,[]),W._26(512,Yl.b,Yl.b,[]),W._26(512,rn,rn,[]),W._26(256,xn.c,void 0,[]),W._26(256,xn.b,void 0,[]),W._26(256,jl.a,on,[])])})}});