webpackJsonp([136],{2096:function(n,l,e){"use strict";function t(n){return g._42(0,[(n()(),g._16(0,0,null,null,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(1,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"funnel")},function(n,l){n(l,0,0,g._29(l,1)._hidden)})}function a(n){return g._42(0,[(n()(),g._16(0,0,null,null,1,"ion-icon",[["name","ios-funnel-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(1,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-funnel-outline")},function(n,l){n(l,0,0,g._29(l,1)._hidden)})}function u(n){return g._42(0,[(n()(),g._16(0,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openCourseFilter(e)&&t}return t},ln.b,ln.a)),g._15(1,1097728,[[1,4]],0,en.a,[[8,""],nn.a,g.p,g.K],null,null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n                "])),(n()(),g._11(16777216,null,0,1,null,t)),g._15(5,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n                "])),(n()(),g._11(16777216,null,0,1,null,a)),g._15(8,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n            "]))],function(n,l){var e=l.component;n(l,5,0,e.courseId);n(l,8,0,!e.courseId)},function(n,l){n(l,0,0,g._41(l,0,0,g._29(l,2).transform("core.courses.filter")))})}function i(n){return g._42(0,[(n()(),g._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.goToCurrentDay()&&t}return t},rn.b,rn.a)),g._15(1,770048,null,0,on.a,[sn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),g._32(131072,tn.a,[an.a,g.i])],function(n,l){n(l,1,0,g._41(l,1,0,g._29(l,2).transform("addon.calendar.today")),"fa-calendar-times-o",900)},null)}function r(n){return g._42(0,[(n()(),g._16(0,0,null,null,10,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),g._15(1,16384,null,0,cn.a,[],null,null),(n()(),g._40(-1,null,["\n                "])),(n()(),g._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadPrevious()&&t}return t},ln.b,ln.a)),g._15(4,1097728,null,0,en.a,[[8,""],nn.a,g.p,g.K],{clear:[0,"clear"]},null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n                    "])),(n()(),g._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(8,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),g._40(-1,0,["\n                "])),(n()(),g._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-back","ios-arrow-back")},function(n,l){n(l,3,0,g._41(l,3,0,g._29(l,5).transform("addon.calendar.dayprev")));n(l,7,0,g._29(l,8)._hidden)})}function o(n){return g._42(0,[(n()(),g._16(0,0,null,null,10,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),g._15(1,16384,null,0,cn.a,[],null,null),(n()(),g._40(-1,null,["\n                "])),(n()(),g._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadNext()&&t}return t},ln.b,ln.a)),g._15(4,1097728,null,0,en.a,[[8,""],nn.a,g.p,g.K],{clear:[0,"clear"]},null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n                    "])),(n()(),g._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(8,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),g._40(-1,0,["\n                "])),(n()(),g._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-forward","ios-arrow-forward")},function(n,l){n(l,3,0,g._41(l,3,0,g._29(l,5).transform("addon.calendar.daynext")));n(l,7,0,g._29(l,8)._hidden)})}function s(n){return g._42(0,[(n()(),g._16(0,0,null,null,8,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),g._15(1,16384,null,0,dn.a,[nn.a,g.p,g.K],null,null),(n()(),g._40(-1,null,["\n            "])),(n()(),g._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(4,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null),(n()(),g._40(5,null,[" ","\n        "])),g._32(131072,tn.a,[an.a,g.i]),g._33(7,{$a:0}),g._32(131072,tn.a,[an.a,g.i])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,g._29(l,4)._hidden);n(l,5,0,g._41(l,5,0,g._29(l,8).transform("core.hasdatatosync",n(l,7,0,g._41(l,5,0,g._29(l,6).transform("core.day"))))))})}function c(n){return g._42(0,[(n()(),g._16(0,0,null,null,3,"core-empty-box",[["icon","calendar"]],null,null,null,fn.b,fn.a)),g._15(1,49152,null,0,hn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n        "]))],function(n,l){n(l,1,0,g._41(l,1,0,g._29(l,2).transform("addon.calendar.noevents")),"calendar")},null)}function d(n){return g._42(0,[(n()(),g._16(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,g._19(1,"",l.parent.context.$implicit.moduleIcon,""))})}function f(n){return g._42(0,[(n()(),g._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,_n.b,_n.a)),g._15(1,704512,null,0,mn.a,[g.p,nn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit.icon)},null)}function h(n){return g._42(0,[(n()(),g._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),g._15(1,16384,null,0,vn.a,[nn.a,g.p,g.K],null,null),(n()(),g._40(-1,null,["\n                        "])),(n()(),g._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(4,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null),(n()(),g._40(-1,null,["\n                        "])),(n()(),g._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),g._40(7,null,["",""])),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,null,["\n                    "]))],function(n,l){n(l,4,0,"time")},function(n,l){n(l,3,0,g._29(l,4)._hidden);n(l,7,0,g._41(l,7,0,g._29(l,8).transform("core.notsent")))})}function _(n){return g._42(0,[(n()(),g._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),g._15(1,16384,null,0,vn.a,[nn.a,g.p,g.K],null,null),(n()(),g._40(-1,null,["\n                        "])),(n()(),g._16(3,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(4,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null),(n()(),g._40(-1,null,["\n                        "])),(n()(),g._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),g._40(7,null,["",""])),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,null,["\n                    "]))],function(n,l){n(l,4,0,"trash")},function(n,l){n(l,3,0,g._29(l,4)._hidden);n(l,7,0,g._41(l,7,0,g._29(l,8).transform("core.deletedoffline")))})}function m(n){return g._42(0,[(n()(),g._16(0,0,null,null,31,null,null,null,null,null,null,null)),(n()(),g._40(-1,null,["\n                "])),(n()(),g._16(2,0,null,null,28,"ion-item",[["class","addon-calendar-event item item-block"],["text-wrap",""]],[[8,"title",0],[2,"item-dimmed",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.gotoEvent(n.context.$implicit.id)&&t}return t},pn.b,pn.a)),g._15(3,278528,null,0,un.i,[g.v,g.w,g.p,g.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),g._31(4,1),g._15(5,1097728,null,3,yn.a,[gn.a,nn.a,g.p,g.K,[2,En.a]],null,null),g._37(335544320,2,{contentLabel:0}),g._37(603979776,3,{_buttons:1}),g._37(603979776,4,{_icons:1}),g._15(9,16384,null,0,bn.a,[],null,null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._11(16777216,null,0,1,null,d)),g._15(12,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._11(16777216,null,0,1,null,f)),g._15(15,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._16(17,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),g._16(18,0,null,null,1,"core-format-text",[],null,null,null,null,null)),g._15(19,540672,null,0,In.a,[g.p,x.a,w.a,Dn.a,an.a,On.a,Tn.a,Cn.a,xn.a,wn.a,O.a,kn.a,[2,Pn.a],[2,Mn.a],[2,Nn.a],An.a,T.a],{text:[0,"text"]},null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._16(21,0,null,2,2,"p",[],null,null,null,null,null)),(n()(),g._16(22,0,null,null,1,"core-format-text",[],null,null,null,null,null)),g._15(23,540672,null,0,In.a,[g.p,x.a,w.a,Dn.a,an.a,On.a,Tn.a,Cn.a,xn.a,wn.a,O.a,kn.a,[2,Pn.a],[2,Mn.a],[2,Nn.a],An.a,T.a],{text:[0,"text"]},null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._11(16777216,null,4,1,null,h)),g._15(26,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,2,["\n                    "])),(n()(),g._11(16777216,null,4,1,null,_)),g._15(29,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,2,["\n                "])),(n()(),g._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,"addon-calendar-event",n(l,4,0,"addon-calendar-eventtype-"+l.context.$implicit.eventtype));n(l,12,0,l.context.$implicit.moduleIcon);n(l,15,0,l.context.$implicit.icon&&!l.context.$implicit.moduleIcon);n(l,19,0,l.context.$implicit.name);n(l,23,0,l.context.$implicit.formattedtime);n(l,26,0,l.context.$implicit.offline&&!l.context.$implicit.deleted);n(l,29,0,l.context.$implicit.deleted)},function(n,l){n(l,2,0,l.context.$implicit.name,l.context.$implicit.ispast)})}function v(n){return g._42(0,[(n()(),g._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),g._15(1,16384,null,0,Kn.a,[nn.a,g.p,g.K,On.a,Sn.l,Fn.a],null,null),(n()(),g._40(-1,null,["\n            "])),(n()(),g._11(16777216,null,null,1,null,m)),g._15(4,802816,null,0,un.j,[g.W,g.T,g.v],{ngForOf:[0,"ngForOf"]},null),(n()(),g._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.filteredEvents)},null)}function p(n){return g._42(0,[(n()(),g._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,Un.b,Un.a)),g._15(1,212992,null,0,Wn.a,[g.p,Mn.a],null,null),g._15(2,1228800,null,2,$n.a,[On.a],null,null),g._37(335544320,5,{_mainButton:0}),g._37(603979776,6,{_fabLists:1}),(n()(),g._40(-1,0,["\n            "])),(n()(),g._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openEdit()&&t}return t},Hn.b,Hn.a)),g._15(7,49152,[[5,4]],0,Vn.a,[nn.a,g.p,g.K],null,null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n                "])),(n()(),g._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),g._15(11,147456,null,0,Z.a,[nn.a,g.p,g.K],{name:[0,"name"]},null),(n()(),g._40(-1,0,["\n            "])),(n()(),g._40(-1,0,["\n        "]))],function(n,l){n(l,1,0);n(l,11,0,"add")},function(n,l){n(l,6,0,g._41(l,6,0,g._29(l,8).transform("addon.calendar.newevent")));n(l,10,0,g._29(l,11)._hidden)})}function y(n){return g._42(0,[(n()(),g._16(0,0,null,null,31,"ion-header",[],null,null,null,null,null)),g._15(1,16384,null,0,Rn.a,[nn.a,g.p,g.K,[2,Yn.a]],null,null),(n()(),g._40(-1,null,["\n    "])),(n()(),g._16(3,0,null,null,27,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Ln.b,Ln.a)),g._15(4,49152,null,0,jn.a,[Bn.a,[2,Yn.a],[2,Pn.a],nn.a,g.p,g.K],null,null),g._15(5,212992,null,0,zn.a,[jn.a,On.a,an.a,T.a],null,null),(n()(),g._40(-1,3,["\n        "])),(n()(),g._16(7,0,null,3,3,"ion-title",[],null,null,null,Gn.b,Gn.a)),g._15(8,49152,null,0,Jn.a,[nn.a,g.p,g.K,[2,qn.a],[2,jn.a]],null,null),(n()(),g._40(9,0,["",""])),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,3,["\n        "])),(n()(),g._16(12,0,null,2,17,"ion-buttons",[["end",""]],null,null,null,null,null)),g._15(13,16384,null,1,Qn.a,[nn.a,g.p,g.K,[2,qn.a],[2,jn.a]],null,null),g._37(603979776,1,{_buttons:1}),(n()(),g._40(-1,null,["\n            "])),(n()(),g._11(16777216,null,null,1,null,u)),g._15(17,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,null,["\n            "])),(n()(),g._16(19,0,null,null,9,"core-context-menu",[],null,null,null,Xn.b,Xn.a)),g._15(20,245760,null,0,sn.a,[an.a,Zn.a,g.p,w.a,[2,nl.a],Tn.a],null,null),(n()(),g._40(-1,0,["\n                "])),(n()(),g._11(16777216,null,0,1,null,i)),g._15(23,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n                "])),(n()(),g._16(25,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,e,!0)&&t}return t},rn.b,rn.a)),g._15(26,770048,null,0,on.a,[sn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,0,["\n            "])),(n()(),g._40(-1,null,["\n        "])),(n()(),g._40(-1,3,["\n    "])),(n()(),g._40(-1,null,["\n"])),(n()(),g._40(-1,null,["\n"])),(n()(),g._16(33,0,null,null,50,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ll.b,ll.a)),g._15(34,4374528,null,0,Mn.a,[nn.a,On.a,Fn.a,g.p,g.K,Bn.a,el.a,g.D,[2,Yn.a],[2,Pn.a]],null,null),(n()(),g._40(-1,1,["\n    "])),(n()(),g._16(36,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(e)&&t}return t},null,null)),g._15(37,212992,null,0,tl.a,[On.a,Mn.a,g.D,Sn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),g._40(-1,null,["\n        "])),(n()(),g._16(39,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,al.b,al.a)),g._15(40,114688,null,0,ul.a,[tl.a,nn.a],{pullingText:[0,"pullingText"]},null),g._32(131072,tn.a,[an.a,g.i]),(n()(),g._40(-1,null,["\n    "])),(n()(),g._40(-1,1,["\n\n    "])),(n()(),g._40(-1,1,["\n    "])),(n()(),g._16(45,0,null,1,19,"ion-grid",[["class","grid"],["padding-top",""]],null,null,null,null,null)),g._15(46,16384,null,0,il.a,[],null,null),(n()(),g._40(-1,null,["\n        "])),(n()(),g._16(48,0,null,null,15,"ion-row",[["class","row"]],null,null,null,null,null)),g._15(49,16384,null,0,rl.a,[],null,null),(n()(),g._40(-1,null,["\n            "])),(n()(),g._11(16777216,null,null,1,null,r)),g._15(52,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,null,["\n            "])),(n()(),g._16(54,0,null,null,5,"ion-col",[["class","addon-calendar-period col"],["text-center",""]],null,null,null,null,null)),g._15(55,16384,null,0,cn.a,[],null,null),(n()(),g._40(-1,null,["\n                "])),(n()(),g._16(57,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),g._40(58,null,["",""])),(n()(),g._40(-1,null,["\n            "])),(n()(),g._40(-1,null,["\n            "])),(n()(),g._11(16777216,null,null,1,null,o)),g._15(62,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,null,["\n        "])),(n()(),g._40(-1,null,["\n    "])),(n()(),g._40(-1,1,["\n\n    "])),(n()(),g._16(66,0,null,1,16,"core-loading",[],null,null,null,ol.b,ol.a)),g._15(67,638976,null,0,sl.a,[an.a,g.p,T.a,Tn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),g._40(-1,0,["\n        "])),(n()(),g._40(-1,0,["\n        "])),(n()(),g._11(16777216,null,0,1,null,s)),g._15(71,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n\n        "])),(n()(),g._11(16777216,null,0,1,null,c)),g._15(74,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n\n        "])),(n()(),g._11(16777216,null,0,1,null,v)),g._15(77,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n\n        "])),(n()(),g._40(-1,0,["\n        "])),(n()(),g._11(16777216,null,0,1,null,p)),g._15(81,16384,null,0,un.k,[g.W,g.T],{ngIf:[0,"ngIf"]},null),(n()(),g._40(-1,0,["\n    "])),(n()(),g._40(-1,1,["\n"])),(n()(),g._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,5,0);n(l,17,0,e.courses&&e.courses.length),n(l,20,0);n(l,23,0,!e.isCurrentDay);n(l,26,0,g._41(l,26,0,g._29(l,27).transform("core.settings.synchronizenow")),e.syncIcon,!1,400,!e.loaded||!e.hasOffline||!e.isOnline);n(l,37,0,e.loaded);n(l,40,0,g._19(1,"",g._41(l,40,0,g._29(l,41).transform("core.pulltorefresh")),""));n(l,52,0,e.currentMoment);n(l,62,0,e.currentMoment);n(l,67,0,e.loaded);n(l,71,0,e.hasOffline);n(l,74,0,!e.filteredEvents||!e.filteredEvents.length);n(l,77,0,e.filteredEvents&&e.filteredEvents.length);n(l,81,0,e.canCreate)},function(n,l){var e=l.component;n(l,3,0,g._29(l,4)._hidden,g._29(l,4)._sbPadding);n(l,9,0,g._41(l,9,0,g._29(l,10).transform("addon.calendar.calendarevents")));n(l,33,0,g._29(l,34).statusbarPadding,g._29(l,34)._hasRefresher);n(l,36,0,"inactive"!==g._29(l,37).state,g._29(l,37)._top);n(l,39,0,g._29(l,40).r.state);n(l,58,0,e.periodName)})}Object.defineProperty(l,"__esModule",{value:!0});var g=e(1),E=(e(0),e(7),e(4)),b=e(30),I=e(32),D=e(110),O=e(10),T=e(12),C=e(155),x=e(2),w=e(5),k=e(25),P=e(214),M=e(367),N=e(473),A=e(476),K=e(52),S=e(184),F=e(213),U=e(16),W=function(){function n(n,l,e,t,a,u,i,r,o,s,c,d,f,h,_,m){var v=this;this.navCtrl=u,this.domUtils=i,this.timeUtils=r,this.calendarProvider=o,this.calendarOffline=s,this.calendarHelper=c,this.calendarSync=d,this.eventsProvider=f,this.coursesProvider=h,this.coursesHelper=_,this.appProvider=m,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.filteredEvents=[],this.canCreate=!1,this.loaded=!1,this.hasOffline=!1,this.isOnline=!1;var p=new Date;this.year=l.get("year")||p.getFullYear(),this.month=l.get("month")||p.getMonth()+1,this.day=l.get("day")||p.getDate(),this.courseId=l.get("courseId"),this.currentSiteId=a.getCurrentSiteId(),n.isAvailable()&&(this.obsDefaultTimeChange=f.on(P.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){o.scheduleEventsNotifications(v.onlineEvents)},this.currentSiteId)),this.newEventObserver=f.on(P.a.NEW_EVENT_EVENT,function(n){n&&n.event&&(v.loaded=!1,v.refreshData(!0,!1,!0))},this.currentSiteId),this.discardedObserver=f.on(P.a.NEW_EVENT_DISCARDED_EVENT,function(){v.loaded=!1,v.refreshData(!0,!1,!0)},this.currentSiteId),this.editEventObserver=f.on(P.a.EDIT_EVENT_EVENT,function(n){n&&n.event&&(v.loaded=!1,v.refreshData(!0,!1,!0))},this.currentSiteId),this.syncObserver=f.on(A.a.AUTO_SYNCED,function(n){v.loaded=!1,v.refreshData(!1,!1,!0)},this.currentSiteId),this.manualSyncObserver=f.on(A.a.MANUAL_SYNCED,function(n){!n||"day"==n.source&&n.year==v.year&&n.month==v.month&&n.day==v.day||(v.loaded=!1,v.refreshData(!1,!1,!0))},this.currentSiteId),this.deleteEventObserver=f.on(P.a.DELETED_EVENT_EVENT,function(n){n&&!n.sent?(v.hasOffline=v.markAsDeleted(n.eventId,!0)||v.hasOffline,v.deletedEvents.push(n.eventId)):(v.loaded=!1,v.refreshData(!1,!1,!0))},this.currentSiteId),this.undeleteEventObserver=f.on(P.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){var l=v.markAsDeleted(n.eventId,!1),e=v.deletedEvents.indexOf(n.eventId);if(-1!=e&&v.deletedEvents.splice(e,1),l)if(v.hasOffline=!1,v.events.length!=v.onlineEvents.length)v.hasOffline=!0;else{var t=v.events.find(function(n){return n.deleted||n.offline});v.hasOffline=!!t}}},this.currentSiteId),this.onlineObserver=e.onchange().subscribe(function(){t.run(function(){v.isOnline=v.appProvider.isOnline()})})}return n.prototype.ngOnInit=function(){this.calculateCurrentMoment(),this.calculateIsCurrentDay(),this.fetchData(!0,!1)},n.prototype.fetchData=function(n,l){var e=this;this.syncIcon="spinner",this.isOnline=this.appProvider.isOnline();return(n?this.sync():Promise.resolve()).then(function(){var n=[];return n.push(e.coursesHelper.getCoursesForPopover(e.courseId).then(function(n){e.courses=n.courses,e.categoryId=n.categoryId})),n.push(e.loadCategories()),n.push(e.calendarOffline.getAllEditedEvents().then(function(n){n.forEach(function(n){n.offline=!0,e.calendarHelper.formatEventData(n)}),e.offlineEvents=e.calendarHelper.classifyIntoMonths(n);var l=n.filter(function(n){return n.id>0});e.offlineEditedEventsIds=l.map(function(n){return n.id})})),n.push(e.calendarOffline.getAllDeletedEventsIds().then(function(n){e.deletedEvents=n})),n.push(e.calendarHelper.canEditEvents(e.courseId).then(function(n){e.canCreate=n})),n.push(e.calendarProvider.getCalendarTimeFormat().then(function(n){e.timeFormat=n})),Promise.all(n)}).then(function(){return e.fetchEvents()}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){e.loaded=!0,e.syncIcon="sync"})},n.prototype.fetchEvents=function(){var n=this;return this.calendarProvider.getDayEvents(this.year,this.month,this.day).catch(function(l){return n.appProvider.isOnline()?Promise.reject(l):Promise.resolve({events:[]})}).then(function(l){var e=[];n.periodName=n.timeUtils.userDate(new Date(n.year,n.month-1,n.day).getTime(),"core.strftimedaydate"),n.onlineEvents=l.events,n.onlineEvents.forEach(n.calendarHelper.formatEventData.bind(n.calendarHelper)),n.calendarProvider.scheduleEventsNotifications(n.onlineEvents),n.events=n.mergeEvents(),n.filterEvents(),n.calculateIsCurrentDay();var t=1e3*n.currentMoment.unix();return n.events.forEach(function(l){l.ispast=n.isPastDay||n.isCurrentDay&&n.isEventPast(l),e.push(n.calendarProvider.formatEventTime(l,n.timeFormat,!0,t).then(function(n){l.formattedtime=n}))}),Promise.all(e)})},n.prototype.mergeEvents=function(){var n=this;if(this.hasOffline=!1,!Object.keys(this.offlineEvents).length&&!this.deletedEvents.length)return this.onlineEvents;var l=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)],e=l&&l[this.day],t=this.onlineEvents;return this.deletedEvents.length&&t.forEach(function(l){l.deleted=-1!=n.deletedEvents.indexOf(l.id),l.deleted&&(n.hasOffline=!0)}),this.offlineEditedEventsIds.length&&(t=t.filter(function(l){return-1==n.offlineEditedEventsIds.indexOf(l.id)})).length!=this.onlineEvents.length&&(this.hasOffline=!0),e&&e.length&&(this.hasOffline=!0,t=this.sortEvents(t.concat(e))),t},n.prototype.filterEvents=function(){var n=this;this.filteredEvents=!this.courseId||this.courseId<0?this.events:this.events.filter(function(l){return n.calendarHelper.shouldDisplayEvent(l,n.courseId,n.categoryId,n.categories)})},n.prototype.sortEvents=function(n){return n.sort(function(n,l){return n.timestart==l.timestart?n.timeduration-l.timeduration:n.timestart-l.timestart})},n.prototype.doRefresh=function(n,l,e){return this.loaded?this.refreshData(!0,e).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshData=function(n,l,e){var t=this;this.syncIcon="spinner";var a=[];return e||a.push(this.calendarProvider.invalidateDayEvents(this.year,this.month,this.day)),a.push(this.calendarProvider.invalidateAllowedEventTypes()),a.push(this.coursesProvider.invalidateCategories(0,!0)),a.push(this.calendarProvider.invalidateTimeFormat()),Promise.all(a).finally(function(){return t.fetchData(n,l)})},n.prototype.loadCategories=function(){var n=this;return this.coursesProvider.getCategories(0,!0).then(function(l){n.categories={},l.forEach(function(l){n.categories[l.id]=l})}).catch(function(){})},n.prototype.sync=function(n){var l=this;return this.calendarSync.syncEvents().then(function(n){n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n.updated&&(n.source="day",n.day=l.day,n.month=l.month,n.year=l.year,l.eventsProvider.trigger(A.a.MANUAL_SYNCED,n,l.currentSiteId))}).catch(function(e){n&&l.domUtils.showErrorModalDefault(e,"core.errorsync",!0)})},n.prototype.gotoEvent=function(n){n<0?this.openEdit(n):this.navCtrl.push("AddonCalendarEventPage",{id:n})},n.prototype.openCourseFilter=function(n){var l=this;this.coursesHelper.selectCourse(n,this.courses,this.courseId).then(function(n){void 0!==n.courseId&&(l.courseId=n.courseId>0?n.courseId:void 0,l.categoryId=n.courseId>0?n.categoryId:void 0,l.calendarHelper.canEditEvents(l.courseId).then(function(n){l.canCreate=n}),l.filterEvents())})},n.prototype.openEdit=function(n){var l={};n?l.eventId=n:l.timestamp=1e3*U().year(this.year).month(this.month-1).date(this.day).unix(),this.courseId&&(l.courseId=this.courseId),this.navCtrl.push("AddonCalendarEditEventPage",l)},n.prototype.calculateCurrentMoment=function(){this.currentMoment=U().year(this.year).month(this.month-1).date(this.day)},n.prototype.calculateIsCurrentDay=function(){var n=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentDay=this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day==n.getDate(),this.isPastDay=this.year<n.getFullYear()||this.year==n.getFullYear()&&this.month<n.getMonth()||this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day<n.getDate()},n.prototype.goToCurrentDay=function(){var n=this,l=new Date,e=this.day,t=this.month,a=this.year;this.day=l.getDate(),this.month=l.getMonth()+1,this.year=l.getFullYear(),this.calculateCurrentMoment(),this.loaded=!1,this.fetchEvents().then(function(){n.isCurrentDay=!0}).catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.year=a,n.month=t,n.day=e,n.calculateCurrentMoment()}).finally(function(){n.loaded=!0})},n.prototype.loadNext=function(){var n=this;this.increaseDay(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.decreaseDay()}).finally(function(){n.loaded=!0})},n.prototype.loadPrevious=function(){var n=this;this.decreaseDay(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.increaseDay()}).finally(function(){n.loaded=!0})},n.prototype.decreaseDay=function(){this.currentMoment.subtract(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},n.prototype.increaseDay=function(){this.currentMoment.add(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},n.prototype.markAsDeleted=function(n,l){var e=this.onlineEvents.find(function(l){return l.id==n});return!!e&&(e.deleted=l,!0)},n.prototype.isEventPast=function(n){return n.timestart+n.timeduration<this.currentTime},n.prototype.ngOnDestroy=function(){this.newEventObserver&&this.newEventObserver.off(),this.discardedObserver&&this.discardedObserver.off(),this.editEventObserver&&this.editEventObserver.off(),this.deleteEventObserver&&this.deleteEventObserver.off(),this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.syncObserver&&this.syncObserver.off(),this.manualSyncObserver&&this.manualSyncObserver.off(),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},n}(),$=function(){return function(){}}(),H=e(1471),V=e(1472),R=e(1473),Y=e(1474),L=e(1475),j=e(1476),B=e(1477),z=e(1478),G=e(1479),J=e(1480),q=e(1481),Q=e(1482),X=e(1483),Z=e(47),nn=e(8),ln=e(45),en=e(43),tn=e(28),an=e(19),un=e(9),rn=e(87),on=e(79),sn=e(75),cn=e(119),dn=e(84),fn=e(122),hn=e(111),_n=e(112),mn=e(95),vn=e(224),pn=e(31),yn=e(22),gn=e(21),En=e(29),bn=e(33),In=e(42),Dn=e(11),On=e(17),Tn=e(3),Cn=e(24),xn=e(6),wn=e(18),kn=e(14),Pn=e(20),Mn=e(27),Nn=e(26),An=e(38),Kn=e(83),Sn=e(40),Fn=e(34),Un=e(277),Wn=e(252),$n=e(217),Hn=e(278),Vn=e(187),Rn=e(365),Yn=e(39),Ln=e(713),jn=e(209),Bn=e(35),zn=e(471),Gn=e(714),Jn=e(309),qn=e(245),Qn=e(366),Xn=e(86),Zn=e(66),nl=e(73),ll=e(179),el=e(102),tl=e(152),al=e(210),ul=e(168),il=e(157),rl=e(118),ol=e(51),sl=e(48),cl=e(72),dl=g._14({encapsulation:2,styles:[],data:{}}),fl=g._12("page-addon-calendar-day",W,function(n){return g._42(0,[(n()(),g._16(0,0,null,null,1,"page-addon-calendar-day",[],null,null,null,y,dl)),g._15(1,245760,null,0,W,[C.a,cl.a,F.a,g.D,x.a,Pn.a,w.a,k.a,P.a,M.a,N.a,A.a,T.a,K.a,S.a,O.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),hl=e(23),_l=e(361),ml=e(362),vl=e(364),pl=e(363),yl=e(470),gl=e(712),El=e(269);e.d(l,"AddonCalendarDayPageModuleNgFactory",function(){return bl});var bl=g._13($,[],function(n){return g._25([g._26(512,g.n,g._6,[[8,[H.a,V.a,R.a,Y.a,L.a,j.a,B.a,z.a,G.a,J.a,q.a,Q.a,X.a,fl]],[3,g.n],g.B]),g._26(4608,un.m,un.l,[g.x,[2,un.w]]),g._26(4608,hl.x,hl.x,[]),g._26(4608,hl.d,hl.d,[]),g._26(4608,_l.b,_l.a,[]),g._26(4608,ml.a,ml.b,[]),g._26(4608,vl.b,vl.a,[]),g._26(4608,pl.b,pl.a,[]),g._26(4608,an.a,an.a,[yl.a,_l.b,ml.a,vl.b,pl.b,an.b,an.c]),g._26(512,un.b,un.b,[]),g._26(512,hl.v,hl.v,[]),g._26(512,hl.i,hl.i,[]),g._26(512,hl.s,hl.s,[]),g._26(512,gl.a,gl.a,[]),g._26(512,E.a,E.a,[]),g._26(512,I.a,I.a,[]),g._26(512,D.a,D.a,[]),g._26(512,b.a,b.a,[]),g._26(512,gl.b,gl.b,[]),g._26(512,$,$,[]),g._26(256,an.c,void 0,[]),g._26(256,an.b,void 0,[]),g._26(256,El.a,W,[])])})}});