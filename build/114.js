webpackJsonp([114],{1986:function(l,n,u){"use strict";function e(l){return h._42(0,[(l()(),h._16(0,0,null,null,3,"ion-label",[["id","addon-chat-groupslabel"]],null,null,null,null,null)),h._15(1,16384,[[2,4]],0,N.a,[z.a,h.p,h.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(l()(),h._40(2,null,["",""])),h._32(131072,H.a,[Q.a,h.i])],function(l,n){l(n,1,0,"addon-chat-groupslabel")},function(l,n){l(n,2,0,h._41(n,2,0,h._29(n,3).transform("core.groupsseparate")))})}function a(l){return h._42(0,[(l()(),h._16(0,0,null,null,3,"ion-label",[["id","addon-chat-groupslabel"]],null,null,null,null,null)),h._15(1,16384,[[2,4]],0,N.a,[z.a,h.p,h.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(l()(),h._40(2,null,["",""])),h._32(131072,H.a,[Q.a,h.i])],function(l,n){l(n,1,0,"addon-chat-groupslabel")},function(l,n){l(n,2,0,h._41(n,2,0,h._29(n,3).transform("core.groupsvisible")))})}function t(l){return h._42(0,[(l()(),h._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),h._15(1,16384,[[5,4]],0,X.a,[h.p],{value:[0,"value"]},null),(l()(),h._40(2,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.id)},function(l,n){l(n,2,0,n.context.$implicit.name)})}function s(l){return h._42(0,[(l()(),h._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Y.b,Y.a)),h._15(1,1097728,null,3,Z.a,[ll.a,z.a,h.p,h.K,[2,nl.a]],null,null),h._37(603979776,2,{contentLabel:0}),h._37(603979776,3,{_buttons:1}),h._37(603979776,4,{_icons:1}),h._15(5,16384,null,0,ul.a,[],null,null),(l()(),h._40(-1,2,["\n                "])),(l()(),h._11(16777216,null,1,1,null,e)),h._15(8,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,2,["\n                "])),(l()(),h._11(16777216,null,1,1,null,a)),h._15(11,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,2,["\n                "])),(l()(),h._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-chat-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(l,n,u){var e=!0,a=l.component;if("click"===n){e=!1!==h._29(l,14)._click(u)&&e}if("keyup.space"===n){e=!1!==h._29(l,14)._keyup()&&e}if("ngModelChange"===n){e=!1!==(a.groupId=u)&&e}if("ionChange"===n){e=!1!==a.fetchSessions(!0)&&e}return e},al.b,al.a)),h._15(14,1228800,null,1,tl.a,[sl.a,ll.a,z.a,h.p,h.K,[2,Z.a],ol.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),h._37(603979776,5,{options:1}),h._35(1024,null,il.l,function(l){return[l]},[tl.a]),h._15(17,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},{update:"ngModelChange"}),h._35(2048,null,il.m,null,[il.q]),h._15(19,16384,null,0,il.n,[il.m],null,null),(l()(),h._40(-1,null,["\n                    "])),(l()(),h._11(16777216,null,null,1,null,t)),h._15(22,802816,null,0,el.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(l()(),h._40(-1,null,["\n                "])),(l()(),h._40(-1,2,["\n            "]))],function(l,n){var u=n.component;l(n,8,0,u.groupInfo.separateGroups);l(n,11,0,u.groupInfo.visibleGroups);l(n,14,0,"action-sheet");l(n,17,0,u.groupId);l(n,22,0,u.groupInfo.groups)},function(l,n){l(n,13,0,h._29(n,14)._disabled,h._29(n,19).ngClassUntouched,h._29(n,19).ngClassTouched,h._29(n,19).ngClassPristine,h._29(n,19).ngClassDirty,h._29(n,19).ngClassValid,h._29(n,19).ngClassInvalid,h._29(n,19).ngClassPending)})}function o(l){return h._42(0,[(l()(),h._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),h._40(1,null,["",""])),h._34(2,1)],null,function(l,n){l(n,1,0,h._41(n,1,0,l(n,2,0,h._29(n.parent.parent,1),n.parent.context.$implicit.duration)))})}function i(l){return h._42(0,[(l()(),h._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),h._40(1,null,["(",")"]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.messagecount)})}function r(l){return h._42(0,[(l()(),h._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),h._40(1,null,["\n                        "," "])),(l()(),h._11(16777216,null,null,1,null,i)),h._15(3,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,null,["\n                    "]))],function(l,n){l(n,3,0,n.context.$implicit.messagecount)},function(l,n){l(n,1,0,n.context.$implicit.userfullname)})}function _(l){return h._42(0,[(l()(),h._16(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),h._40(-1,null,["\n                    "])),(l()(),h._16(2,0,null,null,3,"button",[["clear",""],["ion-button",""]],null,[[null,"click"]],function(l,n,u){var e=!0;if("click"===n){e=!1!==l.component.showMoreUsers(l.parent.context.$implicit,u)&&e}return e},rl.b,rl.a)),h._15(3,1097728,null,0,_l.a,[[8,""],z.a,h.p,h.K],{clear:[0,"clear"]},null),(l()(),h._40(4,0,["\n                        ","\n                    "])),h._32(131072,H.a,[Q.a,h.i]),(l()(),h._40(-1,null,["\n                "]))],function(l,n){l(n,3,0,"")},function(l,n){l(n,4,0,h._41(n,4,0,h._29(n,5).transform("core.showmore")))})}function c(l){return h._42(0,[(l()(),h._16(0,0,null,null,27,"ion-card",[],[[2,"addon-mod-chat-session-selected",null],[2,"addon-mod-chat-session-show-more",null]],[[null,"click"]],function(l,n,u){var e=!0;if("click"===n){e=!1!==l.component.openSession(l.context.$implicit)&&e}return e},null,null)),h._15(1,16384,null,0,cl.a,[z.a,h.p,h.K],null,null),(l()(),h._40(-1,null,["\n                "])),(l()(),h._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Y.b,Y.a)),h._15(4,1097728,null,3,Z.a,[ll.a,z.a,h.p,h.K,[2,nl.a]],null,null),h._37(335544320,9,{contentLabel:0}),h._37(603979776,10,{_buttons:1}),h._37(603979776,11,{_icons:1}),h._15(8,16384,null,0,ul.a,[],null,null),(l()(),h._40(-1,2,["\n                    "])),(l()(),h._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(l()(),h._40(11,null,["",""])),h._34(12,1),(l()(),h._40(-1,2,["\n                    "])),(l()(),h._11(16777216,null,2,1,null,o)),h._15(15,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,2,["\n                "])),(l()(),h._40(-1,null,["\n                "])),(l()(),h._16(18,0,null,null,5,"ion-card-content",[],null,null,null,null,null)),h._15(19,16384,null,0,dl.a,[z.a,h.p,h.K],null,null),(l()(),h._40(-1,null,["\n                    "])),(l()(),h._11(16777216,null,null,1,null,r)),h._15(22,802816,null,0,el.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(l()(),h._40(-1,null,["\n                "])),(l()(),h._40(-1,null,["\n                "])),(l()(),h._11(16777216,null,null,1,null,_)),h._15(26,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,null,["\n            "]))],function(l,n){l(n,15,0,n.context.$implicit.duration);l(n,22,0,n.context.$implicit.sessionusers);l(n,26,0,n.context.$implicit.sessionusers.length<n.context.$implicit.allsessionusers.length)},function(l,n){var u=n.component;l(n,0,0,n.context.$implicit.sessionstart==u.selectedSessionStart&&u.groupId==u.selectedSessionGroupId,n.context.$implicit.sessionusers.length<n.context.$implicit.allsessionusers.length);l(n,11,0,h._41(n,11,0,l(n,12,0,h._29(n.parent,0),1e3*n.context.$implicit.sessionstart)))})}function d(l){return h._42(0,[(l()(),h._16(0,0,null,null,3,"core-empty-box",[["icon","chatbubbles"]],null,null,null,pl.b,pl.a)),h._15(1,49152,null,0,hl.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._32(131072,H.a,[Q.a,h.i]),(l()(),h._40(-1,0,["\n            "]))],function(l,n){l(n,1,0,h._41(n,1,0,h._29(n,2).transform("addon.mod_chat.nosessionsfound")),"chatbubbles")},null)}function p(l){return h._42(0,[h._32(0,gl.a,[fl.a,ml.a]),h._32(0,bl.a,[fl.a,ml.a]),h._37(402653184,1,{splitviewCtrl:0}),(l()(),h._16(3,0,null,null,12,"ion-header",[],null,null,null,null,null)),h._15(4,16384,null,0,vl.a,[z.a,h.p,h.K,[2,Il.a]],null,null),(l()(),h._40(-1,null,["\n    "])),(l()(),h._16(6,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Cl.b,Cl.a)),h._15(7,49152,null,0,kl.a,[sl.a,[2,Il.a],[2,yl.a],z.a,h.p,h.K],null,null),h._15(8,212992,null,0,xl.a,[kl.a,wl.a,Q.a,Pl.a],null,null),(l()(),h._40(-1,3,["\n        "])),(l()(),h._16(10,0,null,3,3,"ion-title",[],null,null,null,Sl.b,Sl.a)),h._15(11,49152,null,0,$l.a,[z.a,h.p,h.K,[2,Kl.a],[2,kl.a]],null,null),(l()(),h._40(12,0,["",""])),h._32(131072,H.a,[Q.a,h.i]),(l()(),h._40(-1,3,["\n    "])),(l()(),h._40(-1,null,["\n"])),(l()(),h._40(-1,null,["\n"])),(l()(),h._16(17,0,null,null,47,"core-split-view",[],null,null,null,Ml.b,Ml.a)),h._15(18,245760,[[1,4]],0,I.a,[[2,yl.a],h.p,Tl.a,wl.a,Q.a],null,null),(l()(),h._40(-1,0,["\n    "])),(l()(),h._16(20,0,null,0,43,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Wl.b,Wl.a)),h._15(21,4374528,null,0,Al.a,[z.a,wl.a,Gl.a,h.p,h.K,sl.a,Ul.a,h.D,[2,Il.a],[2,yl.a]],null,null),(l()(),h._40(-1,1,["\n        "])),(l()(),h._16(23,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,n,u){var e=!0;if("ionRefresh"===n){e=!1!==l.component.refreshSessions(u)&&e}return e},null,null)),h._15(24,212992,null,0,Ol.a,[wl.a,Al.a,h.D,Fl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(l()(),h._40(-1,null,["\n            "])),(l()(),h._16(26,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Dl.b,Dl.a)),h._15(27,114688,null,0,Rl.a,[Ol.a,z.a],{pullingText:[0,"pullingText"]},null),h._32(131072,H.a,[Q.a,h.i]),(l()(),h._40(-1,null,["\n        "])),(l()(),h._40(-1,1,["\n        "])),(l()(),h._16(31,0,null,1,31,"core-loading",[],null,null,null,jl.b,jl.a)),h._15(32,638976,null,0,ql.a,[Q.a,h.p,Pl.a,x.a],{hideUntil:[0,"hideUntil"]},null),(l()(),h._40(-1,0,["\n            "])),(l()(),h._11(16777216,null,0,1,null,s)),h._15(35,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,0,["\n            "])),(l()(),h._16(37,0,null,0,18,"ion-item",[["class","item item-block"]],null,null,null,Y.b,Y.a)),h._15(38,1097728,null,3,Z.a,[ll.a,z.a,h.p,h.K,[2,nl.a]],null,null),h._37(335544320,6,{contentLabel:0}),h._37(603979776,7,{_buttons:1}),h._37(603979776,8,{_icons:1}),h._15(42,16384,null,0,ul.a,[],null,null),(l()(),h._40(-1,2,["\n                "])),(l()(),h._16(44,0,null,1,3,"ion-label",[["id","addon-chat-showalllabel"]],null,null,null,null,null)),h._15(45,16384,[[6,4]],0,N.a,[z.a,h.p,h.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(l()(),h._40(46,null,["",""])),h._32(131072,H.a,[Q.a,h.i]),(l()(),h._40(-1,2,["\n                "])),(l()(),h._16(49,0,null,4,5,"ion-toggle",[["aria-labelledby","addon-chat-showalllabel"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(l,n,u){var e=!0,a=l.component;if("keyup"===n){e=!1!==h._29(l,50)._keyup(u)&&e}if("ngModelChange"===n){e=!1!==(a.showAll=u)&&e}if("ionChange"===n){e=!1!==a.fetchSessions(!0)&&e}return e},El.b,El.a)),h._15(50,1228800,null,0,Ll.a,[ll.a,z.a,wl.a,h.p,h.K,Vl.a,[2,Z.a],Fl.l,Gl.a,h.D],null,{ionChange:"ionChange"}),h._35(1024,null,il.l,function(l){return[l]},[Ll.a]),h._15(52,671744,null,0,il.q,[[8,null],[8,null],[8,null],[2,il.l]],{model:[0,"model"]},{update:"ngModelChange"}),h._35(2048,null,il.m,null,[il.q]),h._15(54,16384,null,0,il.n,[il.m],null,null),(l()(),h._40(-1,2,["\n            "])),(l()(),h._40(-1,0,["\n            "])),(l()(),h._11(16777216,null,0,1,null,c)),h._15(58,802816,null,0,el.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(l()(),h._40(-1,0,["\n            "])),(l()(),h._11(16777216,null,0,1,null,d)),h._15(61,16384,null,0,el.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(l()(),h._40(-1,0,["\n        "])),(l()(),h._40(-1,1,["\n    "])),(l()(),h._40(-1,0,["\n"])),(l()(),h._40(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,8,0),l(n,18,0);l(n,24,0,u.loaded);l(n,27,0,h._19(1,"",h._41(n,27,0,h._29(n,28).transform("core.pulltorefresh")),""));l(n,32,0,u.loaded);l(n,35,0,u.groupInfo&&(u.groupInfo.separateGroups||u.groupInfo.visibleGroups));l(n,45,0,"addon-chat-showalllabel");l(n,52,0,u.showAll);l(n,58,0,u.sessions);l(n,61,0,0==u.sessions.length)},function(l,n){l(n,6,0,h._29(n,7)._hidden,h._29(n,7)._sbPadding);l(n,12,0,h._41(n,12,0,h._29(n,13).transform("addon.mod_chat.chatreport")));l(n,20,0,h._29(n,21).statusbarPadding,h._29(n,21)._hasRefresher);l(n,23,0,"inactive"!==h._29(n,24).state,h._29(n,24)._top);l(n,26,0,h._29(n,27).r.state);l(n,46,0,h._41(n,46,0,h._29(n,47).transform("addon.mod_chat.showincompletesessions")));l(n,49,0,h._29(n,50)._disabled,h._29(n,50)._value,h._29(n,50)._activated,h._29(n,54).ngClassUntouched,h._29(n,54).ngClassTouched,h._29(n,54).ngClassPristine,h._29(n,54).ngClassDirty,h._29(n,54).ngClassValid,h._29(n,54).ngClassInvalid,h._29(n,54).ngClassPending)})}Object.defineProperty(n,"__esModule",{value:!0});var h=u(1),g=(u(0),u(7),u(4)),f=u(30),m=u(32),b=u(110),v=u(721),I=u(26),C=u(44),k=u(68),y=u(5),x=u(3),w=u(273),P=function(){function l(l,n,u,e,a,t,s){var o=this;this.chatProvider=n,this.domUtils=u,this.userProvider=e,this.groupsProvider=a,this.translate=t,this.utils=s,this.loaded=!1,this.showAll=!1,this.groupId=0,this.sessions=[],this.courseId=l.get("courseId"),this.cmId=l.get("cmId"),this.chatId=l.get("chatId"),this.fetchSessions().then(function(){o.splitviewCtrl.isOn()&&o.sessions.length>0&&o.openSession(o.sessions[0])})}return l.prototype.fetchSessions=function(l){var n=this,u=l?this.domUtils.showModalLoading():null;return this.groupsProvider.getActivityGroupInfo(this.cmId,!1).then(function(l){return n.groupInfo=l,n.groupId=n.groupsProvider.validateGroupId(n.groupId,l),n.chatProvider.getSessions(n.chatId,n.groupId,n.showAll)}).then(function(l){var u=[];return l.forEach(function(l){l.duration=l.sessionend-l.sessionstart,l.sessionusers.forEach(function(l){l.userfullname||u.push(n.userProvider.getProfile(l.userid,n.courseId,!0).then(function(n){l.userfullname=n.fullname}).catch(function(){l.userfullname=n.translate.instant("core.deleteduser")+" "+l.userid}))}),l.allsessionusers=l.sessionusers,l.sessionusers.length>4&&(l.sessionusers=l.allsessionusers.slice(0,3))}),Promise.all(u).then(function(){n.sessions=l})}).catch(function(l){n.domUtils.showErrorModalDefault(l,"core.errorloadingcontent",!0)}).finally(function(){n.loaded=!0,u&&u.dismiss()})},l.prototype.refreshSessions=function(l){var n=this,u=[this.groupsProvider.invalidateActivityGroupInfo(this.cmId),this.chatProvider.invalidateSessions(this.chatId,this.groupId,this.showAll)];this.utils.allPromises(u).finally(function(){n.fetchSessions().finally(function(){l.complete()})})},l.prototype.openSession=function(l){this.selectedSessionStart=l.sessionstart,this.selectedSessionGroupId=this.groupId;this.splitviewCtrl.push("AddonModChatSessionMessagesPage",{courseId:this.courseId,chatId:this.chatId,groupId:this.groupId,sessionStart:l.sessionstart,sessionEnd:l.sessionend})},l.prototype.showMoreUsers=function(l,n){l.sessionusers=l.allsessionusers,n.stopPropagation()},l}(),S=function(){return function(){}}(),$=u(1471),K=u(1472),M=u(1473),T=u(1474),W=u(1475),A=u(1476),G=u(1477),U=u(1478),O=u(1479),F=u(1480),D=u(1481),R=u(1482),j=u(1483),q=u(1486),E=u(1487),L=u(1484),V=u(1485),B=u(1488),J=u(1506),N=u(64),z=u(8),H=u(28),Q=u(19),X=u(103),Y=u(31),Z=u(22),ll=u(21),nl=u(29),ul=u(33),el=u(9),al=u(121),tl=u(104),sl=u(35),ol=u(56),il=u(23),rl=u(45),_l=u(43),cl=u(84),dl=u(374),pl=u(122),hl=u(111),gl=u(246),fl=u(6),ml=u(25),bl=u(1522),vl=u(365),Il=u(39),Cl=u(713),kl=u(209),yl=u(20),xl=u(471),wl=u(17),Pl=u(12),Sl=u(714),$l=u(307),Kl=u(245),Ml=u(472),Tl=u(69),Wl=u(179),Al=u(27),Gl=u(34),Ul=u(102),Ol=u(152),Fl=u(40),Dl=u(210),Rl=u(168),jl=u(51),ql=u(48),El=u(1489),Ll=u(368),Vl=u(194),Bl=u(72),Jl=h._14({encapsulation:2,styles:[],data:{}}),Nl=h._12("page-addon-mod-chat-sessions",P,function(l){return h._42(0,[(l()(),h._16(0,0,null,null,1,"page-addon-mod-chat-sessions",[],null,null,null,p,Jl)),h._15(1,49152,null,0,P,[Bl.a,w.a,y.a,C.a,k.a,Q.a,x.a],null,null)],null,null)},{},{},[]),zl=u(361),Hl=u(362),Ql=u(364),Xl=u(363),Yl=u(470),Zl=u(712),ln=u(269),nn=u(71),un=u(268);u.d(n,"AddonModChatSessionsPageModuleNgFactory",function(){return en});var en=h._13(S,[],function(l){return h._25([h._26(512,h.n,h._6,[[8,[$.a,K.a,M.a,T.a,W.a,A.a,G.a,U.a,O.a,F.a,D.a,R.a,j.a,q.a,E.a,L.a,V.a,B.a,J.a,Nl]],[3,h.n],h.B]),h._26(4608,el.m,el.l,[h.x,[2,el.w]]),h._26(4608,il.x,il.x,[]),h._26(4608,il.d,il.d,[]),h._26(4608,zl.b,zl.a,[]),h._26(4608,Hl.a,Hl.b,[]),h._26(4608,Ql.b,Ql.a,[]),h._26(4608,Xl.b,Xl.a,[]),h._26(4608,Q.a,Q.a,[Yl.a,zl.b,Hl.a,Ql.b,Xl.b,Q.b,Q.c]),h._26(512,el.b,el.b,[]),h._26(512,il.v,il.v,[]),h._26(512,il.i,il.i,[]),h._26(512,il.s,il.s,[]),h._26(512,Zl.a,Zl.a,[]),h._26(512,g.a,g.a,[]),h._26(512,m.a,m.a,[]),h._26(512,b.a,b.a,[]),h._26(512,f.a,f.a,[]),h._26(512,ln.a,ln.a,[]),h._26(512,nn.a,nn.a,[]),h._26(512,v.a,v.a,[]),h._26(512,Zl.b,Zl.b,[]),h._26(512,S,S,[]),h._26(256,Q.c,void 0,[]),h._26(256,Q.b,void 0,[]),h._26(256,un.a,P,[])])})}});