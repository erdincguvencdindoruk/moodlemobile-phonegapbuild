webpackJsonp([115],{1984:function(l,n,a){"use strict";function u(l){return _._42(0,[(l()(),_._16(0,0,null,null,9,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,6,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,A.a,[B.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,["",""])),_._34(7,2),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimedayshort")))})}function t(l){return _._42(0,[(l()(),_._16(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,A.a,[B.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,[""," ",""])),_._34(7,2),_._33(8,{$a:0}),_._32(131072,C.a,[J.a,_.i]),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),_._41(n,6,1,_._29(n,9).transform("addon.mod_chat.messageenter",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function e(l){return _._42(0,[(l()(),_._16(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,A.a,[B.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,[""," ",""])),_._34(7,2),_._33(8,{$a:0}),_._32(131072,C.a,[J.a,_.i]),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),_._41(n,6,1,_._29(n,9).transform("addon.mod_chat.messageexit",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function s(l){return _._42(0,[(l()(),_._16(0,0,null,null,23,"ion-item",[["class","addon-mod-chat-message item item-block"],["text-wrap",""]],null,null,null,L.b,L.a)),_._15(1,1097728,null,3,N.a,[q.a,B.a,_.p,_.K,[2,z.a]],null,null),_._37(335544320,1,{contentLabel:0}),_._37(603979776,2,{_buttons:1}),_._37(603979776,3,{_icons:1}),_._15(5,16384,null,0,G.a,[],null,null),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,H.b,H.a)),_._15(8,770048,null,0,Q.a,[V.a,X.a,Y.a,Z.a,ll.a,[2,nl.a]],{user:[0,"user"]},null),_._15(9,16384,null,0,al.a,[],null,null),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(11,0,null,2,8,"h2",[],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(13,0,null,null,2,"p",[["float-end",""]],null,null,null,null,null)),(l()(),_._40(14,null,["",""])),_._34(15,2),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(17,0,null,null,1,"core-format-text",[],null,null,null,null,null)),_._15(18,540672,null,0,ul.a,[_.p,X.a,f.a,tl.a,J.a,el.a,Y.a,sl.a,il.a,ol.a,Z.a,_l.a,[2,V.a],[2,rl.a],[2,nl.a],cl.a,ll.a],{text:[0,"text"]},null),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(21,0,null,2,1,"core-format-text",[],null,null,null,null,null)),_._15(22,540672,null,0,ul.a,[_.p,X.a,f.a,tl.a,J.a,el.a,Y.a,sl.a,il.a,ol.a,Z.a,_l.a,[2,V.a],[2,rl.a],[2,nl.a],cl.a,ll.a],{text:[0,"text"]},null),(l()(),_._40(-1,2,["\n            "]))],function(l,n){l(n,8,0,n.parent.context.$implicit);l(n,18,0,n.parent.context.$implicit.userfullname);l(n,22,0,n.parent.context.$implicit.message)},function(l,n){l(n,14,0,_._41(n,14,0,l(n,15,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")))})}function i(l){return _._42(0,[(l()(),_._16(0,0,null,null,13,"div",[],null,null,null,null,null)),(l()(),_._40(-1,null,["\n            "])),(l()(),_._11(16777216,null,null,1,null,u)),_._15(3,16384,null,0,dl.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,t)),_._15(6,16384,null,0,dl.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,e)),_._15(9,16384,null,0,dl.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,s)),_._15(12,16384,null,0,dl.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n        "]))],function(l,n){var a=n.component;l(n,3,0,a.showDate(a.messages[n.context.index],a.messages[n.context.index-1]));l(n,6,0,n.context.$implicit.issystem&&"enter"==n.context.$implicit.message);l(n,9,0,n.context.$implicit.issystem&&"exit"==n.context.$implicit.message);l(n,12,0,!n.context.$implicit.issystem&&"beep"!=n.context.$implicit.message.substr(0,4))},null)}function o(l){return _._42(0,[_._32(0,pl.a,[il.a,ml.a]),(l()(),_._16(1,0,null,null,12,"ion-header",[],null,null,null,null,null)),_._15(2,16384,null,0,fl.a,[B.a,_.p,_.K,[2,hl.a]],null,null),(l()(),_._40(-1,null,["\n    "])),(l()(),_._16(4,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,gl.b,gl.a)),_._15(5,49152,null,0,bl.a,[xl.a,[2,hl.a],[2,V.a],B.a,_.p,_.K],null,null),_._15(6,212992,null,0,vl.a,[bl.a,el.a,J.a,ll.a],null,null),(l()(),_._40(-1,3,["\n        "])),(l()(),_._16(8,0,null,3,3,"ion-title",[],null,null,null,Il.b,Il.a)),_._15(9,49152,null,0,$l.a,[B.a,_.p,_.K,[2,yl.a],[2,bl.a]],null,null),(l()(),_._40(10,0,["",""])),_._32(131072,C.a,[J.a,_.i]),(l()(),_._40(-1,3,["\n    "])),(l()(),_._40(-1,null,["\n"])),(l()(),_._40(-1,null,["\n"])),(l()(),_._16(15,0,null,null,17,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Ml.b,Ml.a)),_._15(16,4374528,null,0,rl.a,[B.a,el.a,wl.a,_.p,_.K,xl.a,Kl.a,_.D,[2,hl.a],[2,V.a]],null,null),(l()(),_._40(-1,1,["\n    "])),(l()(),_._16(18,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,n,a){var u=!0;if("ionRefresh"===n){u=!1!==l.component.refreshMessages(a)&&u}return u},null,null)),_._15(19,212992,null,0,Pl.a,[el.a,rl.a,_.D,Sl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(l()(),_._40(-1,null,["\n        "])),(l()(),_._16(21,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,kl.b,kl.a)),_._15(22,114688,null,0,Tl.a,[Pl.a,B.a],{pullingText:[0,"pullingText"]},null),_._32(131072,C.a,[J.a,_.i]),(l()(),_._40(-1,null,["\n    "])),(l()(),_._40(-1,1,["\n    "])),(l()(),_._16(26,0,null,1,5,"core-loading",[],null,null,null,Dl.b,Dl.a)),_._15(27,638976,null,0,Rl.a,[J.a,_.p,ll.a,Y.a],{hideUntil:[0,"hideUntil"]},null),(l()(),_._40(-1,0,["\n        "])),(l()(),_._11(16777216,null,0,1,null,i)),_._15(30,802816,null,0,dl.j,[_.W,_.T,_.v],{ngForOf:[0,"ngForOf"]},null),(l()(),_._40(-1,0,["\n    "])),(l()(),_._40(-1,1,["\n"])),(l()(),_._40(-1,null,["\n"]))],function(l,n){var a=n.component;l(n,6,0);l(n,19,0,a.loaded);l(n,22,0,_._19(1,"",_._41(n,22,0,_._29(n,23).transform("core.pulltorefresh")),""));l(n,27,0,a.loaded);l(n,30,0,a.messages)},function(l,n){l(n,4,0,_._29(n,5)._hidden,_._29(n,5)._sbPadding);l(n,10,0,_._41(n,10,0,_._29(n,11).transform("addon.mod_chat.messages")));l(n,15,0,_._29(n,16).statusbarPadding,_._29(n,16)._hasRefresher);l(n,18,0,"inactive"!==_._29(n,19).state,_._29(n,19)._top);l(n,21,0,_._29(n,22).r.state)})}Object.defineProperty(n,"__esModule",{value:!0});var _=a(1),r=(a(0),a(7),a(4)),c=a(30),d=a(32),p=a(110),m=a(721),f=a(5),h=a(273),g=a(16),b=function(){function l(l,n,a){this.domUtils=n,this.chatProvider=a,this.loaded=!1,this.messages=[],this.courseId=l.get("courseId"),this.chatId=l.get("chatId"),this.groupId=l.get("groupId"),this.sessionStart=l.get("sessionStart"),this.sessionEnd=l.get("sessionEnd"),this.fetchMessages()}return l.prototype.fetchMessages=function(){var l=this;return this.chatProvider.getSessionMessages(this.chatId,this.sessionStart,this.sessionEnd,this.groupId).then(function(n){return l.chatProvider.getMessagesUserData(n,l.courseId).then(function(n){l.messages=n})}).catch(function(n){l.domUtils.showErrorModalDefault(n,"core.errorloadingcontent",!0)}).finally(function(){l.loaded=!0})},l.prototype.refreshMessages=function(l){var n=this;this.chatProvider.invalidateSessionMessages(this.chatId,this.sessionStart,this.groupId).finally(function(){n.fetchMessages().finally(function(){l.complete()})})},l.prototype.showDate=function(l,n){return!n||!g(1e3*l.timestamp).isSame(1e3*n.timestamp,"day")},l}(),x=function(){return function(){}}(),v=a(1471),I=a(1472),$=a(1473),y=a(1474),M=a(1475),w=a(1476),K=a(1477),P=a(1478),S=a(1479),k=a(1480),T=a(1481),D=a(1482),R=a(1483),U=a(1486),W=a(1487),E=a(1484),F=a(1485),O=a(1488),j=a(1506),A=a(143),B=a(8),C=a(28),J=a(19),L=a(31),N=a(22),q=a(21),z=a(29),G=a(33),H=a(211),Q=a(180),V=a(20),X=a(2),Y=a(3),Z=a(10),ll=a(12),nl=a(26),al=a(153),ul=a(42),tl=a(11),el=a(17),sl=a(24),il=a(6),ol=a(18),_l=a(14),rl=a(27),cl=a(38),dl=a(9),pl=a(246),ml=a(25),fl=a(365),hl=a(39),gl=a(713),bl=a(209),xl=a(35),vl=a(471),Il=a(714),$l=a(307),yl=a(245),Ml=a(179),wl=a(34),Kl=a(102),Pl=a(152),Sl=a(40),kl=a(210),Tl=a(168),Dl=a(51),Rl=a(48),Ul=a(72),Wl=_._14({encapsulation:2,styles:[],data:{}}),El=_._12("page-addon-mod-chat-session-messages",b,function(l){return _._42(0,[(l()(),_._16(0,0,null,null,1,"page-addon-mod-chat-session-messages",[],null,null,null,o,Wl)),_._15(1,49152,null,0,b,[Ul.a,f.a,h.a],null,null)],null,null)},{},{},[]),Fl=a(23),Ol=a(361),jl=a(362),Al=a(364),Bl=a(363),Cl=a(470),Jl=a(712),Ll=a(269),Nl=a(71),ql=a(268);a.d(n,"AddonModChatSessionMessagesPageModuleNgFactory",function(){return zl});var zl=_._13(x,[],function(l){return _._25([_._26(512,_.n,_._6,[[8,[v.a,I.a,$.a,y.a,M.a,w.a,K.a,P.a,S.a,k.a,T.a,D.a,R.a,U.a,W.a,E.a,F.a,O.a,j.a,El]],[3,_.n],_.B]),_._26(4608,dl.m,dl.l,[_.x,[2,dl.w]]),_._26(4608,Fl.x,Fl.x,[]),_._26(4608,Fl.d,Fl.d,[]),_._26(4608,Ol.b,Ol.a,[]),_._26(4608,jl.a,jl.b,[]),_._26(4608,Al.b,Al.a,[]),_._26(4608,Bl.b,Bl.a,[]),_._26(4608,J.a,J.a,[Cl.a,Ol.b,jl.a,Al.b,Bl.b,J.b,J.c]),_._26(512,dl.b,dl.b,[]),_._26(512,Fl.v,Fl.v,[]),_._26(512,Fl.i,Fl.i,[]),_._26(512,Fl.s,Fl.s,[]),_._26(512,Jl.a,Jl.a,[]),_._26(512,r.a,r.a,[]),_._26(512,d.a,d.a,[]),_._26(512,p.a,p.a,[]),_._26(512,c.a,c.a,[]),_._26(512,Ll.a,Ll.a,[]),_._26(512,Nl.a,Nl.a,[]),_._26(512,m.a,m.a,[]),_._26(512,Jl.b,Jl.b,[]),_._26(512,x,x,[]),_._26(256,J.c,void 0,[]),_._26(256,J.b,void 0,[]),_._26(256,ql.a,b,[])])})}});